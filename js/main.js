jQuery(document).ready(function(c){"use strict";var t,e,o,a,n,i,r,s,l,d,h,u,g,f,v,m,p,y=500,b=c("header").outerHeight(),w="#navigation-show a, #logo a",C=c("#article-content").outerHeight(),T=c("main").outerHeight(),k=c(".investment-container").outerHeight(),x=".layout-post",H="#current-post-cover",z="#catelog-list",O="#pagination a",P="#layout-cart, #layout-pure",j='<div class = "transition"><div class = "three-bounce1"> </div> <div class = "three-bounce2"> </div> <div class = "three-bounce3"> </div> </div> ';function q(t){c(".nav-container").toggleClass("is-visible",t)}(function(){var t=c("header").attr("data-img-mode"),e=" ",o=c("header").attr("data-random-max"),a=0;switch(c(x).length&&c(H).length&&(t="post"),t){case"random":a=Math.floor(Math.random()*(o-1)+1),e=c("header").attr("data-random-src")+a+".jpg";break;case"normal":e=c("header").attr("data-normal-src");break;case"post":e=c(H).attr("data-scr");break;default:e="https://source.unsplash.com/collection/954550/1920x1080"}function n(){c("html, body").delay(1e3).animate({scrollTop:b+2},3*y)}function i(){c("#status").fadeOut(),c("#preloader").delay(y).fadeOut("slow"),c("body").delay(y),setTimeout(function(){c("html").removeClass("html-loading")},y)}var r=new Image,s=setTimeout(function(){return console.log("timeout"),i(),void n()},1e4);r.crossOrigin="Anonymous",r.src=e,r.onerror=function(){s&&clearTimeout(s),i(),n(),console.log("Header background imgSrc:"+r.src),console.log("Failed to load & set background img for header!")},r.onload=function(){s&&clearTimeout(s),function(t){var e="url("+t+")";c("header").css("background-image",e),i(),c(x).length&&n()}(r.src),function(t){var e=new Vibrant(t).swatches(),o="",a=[],n=e.Vibrant;n&&(o=n.getBodyTextColor(),a=n.getRgb());var i=" ",r=.299*a[0]+.587*a[1]+.114*a[2];i=192<=r?"#000":"#fff",c(".motto, #read-more").css({color:i||o}),c(w).css({color:i||o}),c(w).each(function(){c(this).hover(function(){c(this).css({color:"darkgoldenrod"})},function(){c(this).css({color:i||o})})})}(r)}})(),c(".nav-trigger").on("click",function(t){t.preventDefault(),q(!0),c("body").addClass("body-fixed")}),c(".nav-close").on("click",function(t){t.preventDefault(),q(!1),c("body").removeClass("body-fixed")}),m=location.href,p=!1,c("#navigation-show a").each(function(){var t=c(this).attr("class");t=t.substr(10),-1<m.indexOf(t)&&""!=c(this).attr("href")?(c(this).addClass("active"),p=!0):c(this).removeClass("active")}),!p&&c("#layout-cart, #layout-pure").length&&c("#navigation-show a").eq(0).addClass("active"),g=c(u="#navigation-hide").outerHeight(),f=c(".article-title").outerHeight(),v=c(".article-meta").outerHeight(),c(window).scroll(function(){var t=c(window).scrollTop(),e=c(document).height(),o=c(window).height(),a=0;(100<(a=(a=c(x).length?(t-b)/(C+f+v+80-o)*100:t/(e-o)*100).toFixed(1))||a<0)&&(a=100),c("#progress-percentage h1").text(a+"%"),c("#progress-bar").attr("style","width: "+a+"%; display: block;"),(b<500?500:b)<=t?(c(u).css({top:"0"}).show(),c(".nav-trigger").show()):(c(u).css({top:"-"+g+"px"}).hide(),c(".nav-trigger").hide()),b+300<=t?c("#navigation-hide p").show():c("#navigation-hide p").hide()}).trigger("scroll"),l=b,d=T-k,h=".switch-button",c(x).length&&c(window).scroll(function(){var t=c(document).scrollTop();l<=t&&t<d?c(z).css("position","fixed").show().fadeIn(y):c(z).hide().fadeOut(y)}),c(z).length&&new katelog({contentEl:"article-content",catelogEl:"catelog-list",linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",selector:["h1","h2","h3","h4","h5","h6"],supplyTop:20,active:function(t){}}),c(x).length&&c(z).length?(c(h).show(),s=1,c(h).on("click",function(){c(this).toggleClass("toc-switch-button-active"),s=1==s?(c("main").toggleClass("inline-flex"),c("#layout-toc").toggleClass("show").fadeToggle(),2):(c("#layout-toc").toggleClass("show").fadeToggle(),setTimeout(function(){c("main").toggleClass("inline-flex")},250),1)})):c(h).hide(),i=c("#totop"),r=c("#read-more"),i.hide(),c(window).scroll(function(){500<c(document).scrollTop()?c(i).stop().fadeTo(y,1):c(i).stop().fadeTo(y,0)}),c(i).click(function(){return c("html, body").animate({scrollTop:0},500),!1}),c(r).click(function(){return c("html, body").animate({scrollTop:c("main").offset().top+2},500),!1}),function(){if(-1!=window.location.pathname.indexOf("archive")){var o="",a="";c("#layout-archive-year  ul li").each(function(t){var e=c(this).find("em").attr("year");(e<o||""==o)&&(o=e,""==a&&(a=e),c(this).before("<h3 class='"+o+"'>"+o+"<em>("+c("[year='"+o+"']").length+"篇)</em></h3>")),c(this).attr("year",o)}),c("#layout-archive-year h3").each(function(){c("#layout-archive-year ul li[year='"+c(this).attr("class")+"'").wrapAll("<div year='"+c(this).attr("class")+"'></div>"),c("h3."+c(this).attr("class")).click(function(){c(this).toggleClass("title-bg").next().slideToggle(300)})}),c("#layout-archive-year ul div[year!='"+a+"']").hide(),c("h3."+a).addClass("title-bg")}}(),c("body").on("click",O,function(){return c(O).text(" ").append(j),c.ajax({type:"get",url:c(this).attr("href"),async:!0,timeout:1e4,error:function(t){},success:function(t){var e=c(t).find("#post"),o=c(t).find(O).attr("href");c(P).append(e.fadeIn(y).addClass("annie-animation-zoom")),c(O).empty().text(c(O).attr("data-title")),null!=o?c(O).attr("href",o):c("#pagination").html("<span>"+c(O).attr("data-status")+"</span>")},complete:function(){}}),!1}),o=".investment-title-1",a="on",c(n=".investment-content").each(function(){c(this).children().eq(0).show()}),c(o).each(function(){c(this).children().eq(0).addClass(a)}),c(o).children().click(function(){c(this).addClass(a).siblings().removeClass(a);var t=c(o).children().index(this);c(n).children().eq(t).show().siblings().hide()}),c(".tags a, .category a").click(function(){c("#TCP-title").text("查询结果"),c("#TCP-content").text("").append(j);var t=c(this).attr("href");return null!=t&&c.ajax({url:t,type:"get",async:!0,error:function(t){},success:function(t){c("#TCP-content").empty();var e=c(t).find(".layout-archive");c("#TCP-content").append(e.fadeIn(y).addClass("annie-animation-zoom")),c(".layout-archive").css({paddingTop:"0"}),c(".layout-archive i").css({marginTop:"5px",marginBottom:"30px"})},complete:function(){}}),!1}),zh_init(),yall({observeChanges:!0}),c(".post-cover img, .relate-post-cover img").resizeToParent({parent:".post-cover, .relate-post-cover"}),e=c(t="body, .highlight").niceScroll({cursorborder:"none",autohidemode:!0}),c(t).resize(function(t){setTimeout(function(){e.resize()},2)})});
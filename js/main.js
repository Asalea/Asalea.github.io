jQuery(document).ready(function(c){"use strict";var e,o,a,t,n,i,r,s,l,h,d,u,g,f,v,m=500,p=c("header").outerHeight(),y="#navigation-show a, #logo a",b=c("#article-content").outerHeight(),w=c("main").outerHeight(),C=c(".investment-container").outerHeight(),T=".layout-post",k="#current-post-cover",x="#catelog-list",H="#pagination a",z='<div class = "transition"><div class = "three-bounce1"> </div> <div class = "three-bounce2"> </div> <div class = "three-bounce3"> </div> </div> ';function O(t){c(".nav-container").toggleClass("is-visible",t)}(function(){var t=c("header").attr("data-img-mode"),e=" ",o=c("header").attr("data-random-max"),a=0;switch(c(T).length&&c(k).length&&(t="post"),t){case"random":a=Math.floor(Math.random()*(o-1)+1),e=c("header").attr("data-random-src")+a+".jpg";break;case"normal":e=c("header").attr("data-normal-src");break;case"post":e=c(k).attr("data-scr");break;default:e="https://source.unsplash.com/collection/954550/1920x1080"}function n(){c("html, body").delay(1e3).animate({scrollTop:p+2},3*m)}function i(){c("#status").fadeOut(),c("#preloader").delay(m).fadeOut("slow"),c("body").delay(m),setTimeout(function(){c("html").removeClass("html-loading")},m)}var r=new Image,s=setTimeout(function(){return console.log("timeout"),i(),void n()},1e4);r.crossOrigin="Anonymous",r.src=e,r.onerror=function(){s&&clearTimeout(s),i(),n(),console.log("Header background imgSrc:"+r.src),console.log("Failed to load & set background img for header!")},r.onload=function(){var t;s&&clearTimeout(s),t="url("+r.src+")",c("header").css("background-image",t),i(),c(T).length&&n(),function(){var t=new Vibrant(r).swatches(),e="",o=[],a=t.Vibrant;a&&(e=a.getBodyTextColor(),o=a.getRgb());var n,i=.299*o[0]+.587*o[1]+.114*o[2];n=192<=i?"#000":"#fff",c(".motto, #read-more").css({color:n||e}),c(y).css({color:n||e}),c(y).each(function(){c(this).hover(function(){c(this).css({color:"darkgoldenrod"})},function(){c(this).css({color:n||e})})})}()}})(),c(".nav-trigger").on("click",function(t){t.preventDefault(),O(!0),c("body").addClass("body-fixed")}),c(".nav-close").on("click",function(t){t.preventDefault(),O(!1),c("body").removeClass("body-fixed")}),f=location.href,v=!1,c("#navigation-show a").each(function(){var t=c(this).attr("class");t=t.substr(10),-1<f.indexOf(t)&&""!=c(this).attr("href")?(c(this).addClass("active"),v=!0):c(this).removeClass("active")}),!v&&c("#layout-cart, #layout-pure").length&&c("#navigation-show a").eq(0).addClass("active"),d=c(h="#navigation-hide").outerHeight(),u=c(".article-title").outerHeight(),g=c(".article-meta").outerHeight(),c(window).scroll(function(){var t=c(window).scrollTop(),e=c(document).height(),o=c(window).height(),a=0;(100<(a=(a=c(T).length?(t-p)/(b+u+g+80-o)*100:t/(e-o)*100).toFixed(1))||a<0)&&(a=100),c("#progress-percentage h1").text(a+"%"),c("#progress-bar").attr("style","width: "+a+"%; display: block;"),(p<500?500:p)<=t?(c(h).css({top:"0"}).show(),c(".nav-trigger").show()):(c(h).css({top:"-"+d+"px"}).hide(),c(".nav-trigger").hide()),p+300<=t?c("#navigation-hide p").show():c("#navigation-hide p").hide()}).trigger("scroll"),r=p,s=w-C,l=".switch-button",c(T).length&&c(window).scroll(function(){var t=c(document).scrollTop();r<=t&&t<s?c(x).css("position","fixed").show().fadeIn(m):c(x).hide().fadeOut(m)}),c(x).length&&new katelog({contentEl:"article-content",catelogEl:"catelog-list",linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",selector:["h1","h2","h3","h4","h5","h6"],supplyTop:20,active:function(t){}}),c(T).length&&c(x).length?(c(l).show(),i=1,c(l).on("click",function(){c(this).toggleClass("toc-switch-button-active"),i=1==i?(c("main").toggleClass("inline-flex"),c("#layout-toc").toggleClass("show").fadeToggle(),2):(c("#layout-toc").toggleClass("show").fadeToggle(),setTimeout(function(){c("main").toggleClass("inline-flex")},250),1)})):c(l).hide(),t=c("#totop"),n=c("#read-more"),t.hide(),c(window).scroll(function(){500<c(document).scrollTop()?c(t).stop().fadeTo(m,1):c(t).stop().fadeTo(m,0)}),c(t).click(function(){return c("html, body").animate({scrollTop:0},500),!1}),c(n).click(function(){return c("html, body").animate({scrollTop:c("main").offset().top+2},500),!1}),function(){if(-1!=window.location.pathname.indexOf("archive")){var o="",a="";c("#layout-archive-year  ul li").each(function(t){var e=c(this).find("em").attr("year");(e<o||""==o)&&(o=e,""==a&&(a=e),c(this).before("<h3 class='"+o+"'>"+o+"<em>("+c("[year='"+o+"']").length+"篇)</em></h3>")),c(this).attr("year",o)}),c("#layout-archive-year h3").each(function(){c("#layout-archive-year ul li[year='"+c(this).attr("class")+"'").wrapAll("<div year='"+c(this).attr("class")+"'></div>"),c("h3."+c(this).attr("class")).click(function(){c(this).toggleClass("title-bg").next().slideToggle(300)})}),c("#layout-archive-year ul div[year!='"+a+"']").hide(),c("h3."+a).addClass("title-bg")}}(),c("body").on("click",H,function(){return c(H).text(" ").append(z),c.ajax({type:"get",url:c(this).attr("href"),async:!0,timeout:1e4,error:function(t){},success:function(t){var e=c(t).find("#post"),o=c(t).find(H).attr("href");c("#layout-cart, #layout-pure").append(e.fadeIn(m).addClass("annie-animation-zoom")),c(H).empty().text(c(H).attr("data-title")),null!=o?c(H).attr("href",o):c("#pagination").html("<span>"+c(H).attr("data-status")+"</span>")},complete:function(){}}),!1}),o=".investment-title-1",a="on",c(".investment-content").each(function(){c(this).children().eq(0).show()}),c(o).each(function(){c(this).children().eq(0).addClass(a)}),c(o).children().click(function(){c(this).addClass(a).siblings().removeClass(a);var t=c(o).children().index(this);c(".investment-content").children().eq(t).show().siblings().hide()}),c(".tags a, .category a").click(function(){c("#TCP-title").text("查询结果"),c("#TCP-content").text("").append(z);var t=c(this).attr("href");return null!=t&&c.ajax({url:t,type:"get",async:!0,error:function(t){},success:function(t){c("#TCP-content").empty();var e=c(t).find(".layout-archive");c("#TCP-content").append(e.fadeIn(m).addClass("annie-animation-zoom")),c(".layout-archive").css({paddingTop:"0"}),c(".layout-archive i").css({marginTop:"5px",marginBottom:"30px"})},complete:function(){}}),!1}),zh_init(),yall({observeChanges:!0}),c(".post-cover img, .relate-post-cover img").resizeToParent({parent:".post-cover, .relate-post-cover"}),e=c("body, .highlight").niceScroll({cursorborder:"none",autohidemode:!0}),c("body, .highlight").resize(function(t){setTimeout(function(){e.resize()},2)})});
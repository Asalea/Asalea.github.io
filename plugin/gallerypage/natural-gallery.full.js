!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NaturalGallery",[],t):"object"==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()}(this,function(){var n,i,wn=Math.round,xn=Math.max,p=Math.floor;return i={},o.m=n=[function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.getIcon=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?" ":"")+t)},e.hasClass=function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.uniqBy=function(e,n){var i=[];return e.forEach(function(t){i.some(function(e){return t[n]===e[n]})||i.push(t)}),i},e.differenceBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})||o.push(t)}),o},e.intersectionBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})&&o.push(t)}),o};var n=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var t=0;t<n.length;t++)e=e.replace(n[t].letters,n[t].base);return e}}(t.Utility||(t.Utility={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(i.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),i);function i(e){this.header=e,this._collection=null}t.AbstractFilter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3),n(4);var i=n(5);t.Gallery=i.Gallery},function(){},function(){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(9),u=n(10),l=n(11),s=n(0),o=n(13),a=(c.prototype.render=function(){var n=this;this.noResults=document.createElement("div"),s.Utility.addClass(this.noResults,"natural-gallery-noresults"),this.noResults.appendChild(s.Utility.getIcon("icon-noresults")),this.noResults.style.display="block",this.nextButton=document.createElement("div"),s.Utility.addClass(this.nextButton,"natural-gallery-next"),this.nextButton.appendChild(s.Utility.getIcon("icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",function(e){e.preventDefault();var t=n.getRowsPerPage();n.addElements(t),n.pagination(t)});var e=document.createElement("iframe");this.rootElement.appendChild(e);var t=null;e.contentWindow.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){n.resize()},100)}),this.bodyElement=document.createElement("div"),s.Utility.addClass(this.bodyElement,"natural-gallery-body"),this.bodyElement.appendChild(this.noResults),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(this.nextButton)},c.prototype.addItems=function(e){if(e.constructor===Array&&e.length){var t=0===this.collection.length||this.collection.length===this.pswpContainer.length;e.forEach(function(e){this._collection.push(new i.Item(e,this))},this),o.Organizer.organize(this),this.header&&this.header.refresh(),t&&this.addElements(this.getRowsPerPage())}},c.prototype.style=function(){this.collection.forEach(function(e){e.style()})},c.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection;if(this.nextButton.style.display="block",this.pswpContainer.length===t.length)return this.nextButton.style.display="none",void(0===t.length&&(this.noResults.style.display="block",this.rootElement.getElementsByClassName("natural-gallery-images")[0].style.display="none"));for(var n,i=this.pswpContainer.length,o=this.pswpContainer.length?t[i].row+e:e,r=i;r<t.length;r++)(n=t[r]).row<o&&(this.pswpContainer.push(n.getPswpItem()),this.bodyElement.appendChild(n.loadElement()),n.bindClick(),n.flash()),this.pswpContainer.length===t.length&&(this.nextButton.style.display="none");this.noResults.style.display="none";var u=this.rootElement.getElementsByClassName("natural-gallery-images")[0];u&&(u.style.display="block");var l=this.rootElement.getElementsByClassName("natural-gallery-visible")[0];l&&(l.textContent=this.pswpContainer.length+"");var s=this.rootElement.getElementsByClassName("natural-gallery-total")[0];s&&(s.textContent=t.length+"")},c.prototype.getRowsPerPage=function(){if(this.options.limit)return this.options.limit;var e=(this.scrollElement?this.scrollElement.clientHeight:document.documentElement.clientHeight)-this.bodyElement.offsetTop,t=p(e/(.55*this.options.rowHeight));return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t},c.prototype.resize=function(){var e=p(this.bodyElement.getBoundingClientRect().width);if(e!==this.bodyWidth){this.bodyWidth=e,o.Organizer.organize(this);var t=this.collection[this.pswpContainer.length-1],n=t?t.row+1:this.getRowsPerPage();this.reset(),this.addElements(n)}},c.prototype.refresh=function(){this.reset(),o.Organizer.organize(this),this.addElements(this.getRowsPerPage())},c.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()}),this.noResults.style.display="block"},c.prototype.bindScroll=function(e){var o,r=this;o=e instanceof Document?e.documentElement:e,e.addEventListener("scroll",function(){var e=r.rootElement.offsetTop+r.rootElement.offsetHeight+r.options.infiniteScrollOffset,t=o.scrollTop-(o.clientTop||0),n=o.clientHeight,i=t-r.old_scroll_top;r.old_scroll_top=t,0<i&&e<=t+n&&(r.addElements(1),r.pagination(1))})},c.prototype.pagination=function(e){if(void 0===e&&(e=1),this.events.pagination)if(this.collection.length){var t=this.getMaxImagesPerRow();this._events.pagination(this.collection.length,t*e)}else{var n=o.Organizer.simulatePagination(this);this._events.pagination(this.collection.length,n*this.getRowsPerPage()*2)}},c.prototype.getMaxImagesPerRow=function(){return xn.apply(null,this.collection.reduce(function(e,t){return e[t.row]=-1<e[t.row]?e[t.row]+1:1,e},[]))},c.prototype.select=function(e){-1===this._selected.indexOf(e)&&(this._selected.push(e),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselect=function(e){var t=this._selected.indexOf(e);-1<t&&(this._selected.splice(t,1),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselectAll=function(){for(var e=this._selected.length-1;0<=e;e--)this._selected[e].toggleSelect();this._selected=[]},Object.defineProperty(c.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpContainer",{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"collection",{get:function(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection},set:function(e){this.reset(),this._collection=[],this.addItems(e)},enumerable:!0,configurable:!0}),c.prototype.getOriginalCollection=function(){return this._collection},Object.defineProperty(c.prototype,"bodyWidth",{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bodyElement",{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rootElement",{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpApi",{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpElement",{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"header",{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),c);function c(e,t,n,i){for(var o in void 0===i&&(i=null),this.scrollElement=i,this._options={rowHeight:350,format:"natural",round:3,margin:3,limit:0,showLabels:"hover",lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:"Category",labelNone:"None",labelOthers:"Others",labelSearch:"Search",labelImages:"Images",selectable:!1,zoomRotation:!0,infiniteScrollOffset:0},this._events={},this.old_scroll_top=0,this._pswpContainer=[],this._collection=[],this._categories=[],this._selected=[],this.defaultImageRatio=.7,this.pswpElement=t,this.options)void 0===n.options[o]&&(n.options[o]=this.options[o]);this.options=n.options,this.categories=n.categories?n.categories:[],this.rootElement=e,s.Utility.addClass(this.rootElement,"natural-gallery"),this._events=n.events?n.events:{},this._events.select&&(this.options.selectable=!0),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new r.Header(this),this.options.searchFilter&&this.header.addFilter(new u.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new l.CategoryFilter(this.header))),this.render(),this.bodyWidth=p(this.bodyElement.getBoundingClientRect().width),n.images?this.collection=n.images:this.pagination(),0===this.options.limit&&this.bindScroll(null===i?document:i)}t.Gallery=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=n(7),l=n(8),i=(o.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},o.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},o.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},o.prototype.getTitleDetails=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.getElementsByTagName("a"),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute("href"),i.linkTarget=n[0].getAttribute("target")),i},o.prototype.createElement=function(){var t=this,e=this.gallery.options,n=null;this.title&&-1<["true","hover"].indexOf(e.showLabels)&&(n=!0);var i=document.createElement("div"),o=document.createElement("div"),r=this.getLinkElement(),u=null;if(e.lightbox&&n&&r?(n=r,a.Utility.addClass(n,"button"),u=o):e.lightbox&&n&&!r?(n=document.createElement("div"),u=i):e.lightbox&&!n?u=i:!e.lightbox&&n&&r?(i=r,(n=document.createElement("div")).classList.add("button")):e.lightbox||!n||r?e.lightbox||n||!r||(i=r):n=document.createElement("div"),u&&(a.Utility.addClass(u,"zoomable"),e.zoomRotation&&a.Utility.addClass(u,"rotation")),a.Utility.addClass(o,"image"),a.Utility.addClass(i,"figure loading visible"),o.style.backgroundImage="url("+this.thumbnail+")",i.appendChild(o),e.round){var l=e.round+"px";i.style.borderRadius=l,o.style.borderRadius=l}if(this.element=i,this.image=o,n&&(n.textContent=this.title,a.Utility.addClass(n,"title"),"hover"===e.showLabels&&a.Utility.addClass(n,"hover"),i.appendChild(n)),this.gallery.options.selectable){this.selectBtn=document.createElement("div");var s=a.Utility.getIcon("icon-select");this.selectBtn.appendChild(s),this.selectBtn.classList.add("selectBtn"),s.addEventListener("click",function(e){e.stopPropagation(),t.toggleSelect()}),this.element.appendChild(this.selectBtn)}},o.prototype.toggleSelect=function(){this.selected=!this.selected,this.selected?(this.element.classList.add("selected"),this.gallery.select(this)):(this.element.classList.remove("selected"),this.gallery.unselect(this))},o.prototype.getLinkElement=function(){var t=this,e=null;return this.link&&(e=document.createElement("a"),this.gallery.events.link?e.addEventListener("click",function(e){t.gallery.events.link.preventDefault&&e.preventDefault(),t.gallery.events.link.callback(t._fields)}):(e.setAttribute("href",this.link),a.Utility.addClass(e,"link"),this.linkTarget&&e.setAttribute("target",this.linkTarget))),e},o.prototype.style=function(){a.Utility.removeClass(this.element,"visible"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.element.style.marginRight=this.gallery.options.margin+"px",this.element.style.marginBottom=this.gallery.options.margin+"px",this.last&&(this.element.style.marginRight="0");var e=this;window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.flash=function(){var e=this;a.Utility.removeClass(this.element,"visible"),window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.bindClick=function(){if(this.gallery.options.lightbox){var t=this;this.binded||(this.binded=!0,(this.link?this.image:this.element).addEventListener("click",function(e){t.openPhotoSwipe.call(t,e,t.element)}))}},o.prototype.openPhotoSwipe=function(e,t){e.preventDefault();var n=this;if(this.gallery.options.lightbox){var i=Array.prototype.slice.call(t.parentNode.children).indexOf(t)-1,o=new u(this.gallery.pswpElement,l,this.gallery.pswpContainer,{index:i,bgOpacity:.85,showHideOpacity:!0,loop:!1});(this.gallery.pswpApi=o).init();var r=null;o.listen("beforeChange",function(e){0<e&&o.getCurrentIndex()===o.items.length-1?n.gallery.addElements():e===-1*(o.items.length-1)&&(r=o.items.length,n.gallery.addElements())}),o.listen("afterChange",function(){r&&(o.goTo(r),r=null)})}},o.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},o.prototype.getElement=function(){return this.element},o.prototype.loadElement=function(){var e=this,t=document.createElement("img");return t.setAttribute("src",this.thumbnail),t.addEventListener("load",function(){a.Utility.removeClass(e.element,"loading"),a.Utility.addClass(e.element,"loaded")}),t.addEventListener("error",function(){a.Utility.addClass(e.element,"errored")}),this.element},o.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enlarged",{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tWidth",{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tHeight",{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eWidth",{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eHeight",{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"last",{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"row",{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"binded",{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"linkTarget",{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),o);function o(e,t){this.gallery=t,this._binded=!1,this.selected=!1,this._fields=e,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}t.Item=i},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(h,i,e,t){var c=Math.min,d=Math.abs,n=Math.PI,f={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,n){f.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){f.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(f.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(n/2))},inOut:function(e){return-(Math.cos(n*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(f.features)return f.features;var e=f.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!n.pointerEvent){var i=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var o=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);o&&0<o.length&&1<=(o=parseInt(o[1],10))&&o<8&&(n.isOldIOSPhone=!0)}var r=i.match(/Android\s([0-9\.]*)/),u=r?r[1]:0;1<=(u=parseFloat(u))&&(u<4.4&&(n.isOldAndroid=!0),n.androidVersion=u),n.isMobileOpera=/opera mini|opera mobi/i.test(i)}for(var l,s,a=["transform","perspective","animationName"],c=["","webkit","Moz","ms","O"],d=0;d<4;d++){t=c[d];for(var p=0;p<3;p++)l=a[p],s=t+(t?l.charAt(0).toUpperCase()+l.slice(1):l),!n[l]&&s in e&&(n[l]=s);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var h=0;n.raf=function(e){var t=(new Date).getTime(),n=xn(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,f.features=n}};f.detectFeatures(),f.features.oldIE&&(f.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",u=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=u;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var m=this,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};f.extend(g,t);function o(e,t){f.extend(m,t.publicMethods),et.push(e)}function s(e){var t=Yt();return t-1<e?e-t:e<0?t+e:e}function r(e,t){return it[e]||(it[e]=[]),it[e].push(t)}function y(e){var t=it[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(m,n)}}function p(){return(new Date).getTime()}function E(e){Ze=e,m.bg.style.opacity=e*g.bgOpacity}function u(e,t,n,i,o){(!nt||o&&o!==m.currItem)&&(i/=o?o.fitRatio:m.currItem.fitRatio),e[ce]=ee+t+"px, "+n+"px"+te+" scale("+i+")"}function b(e,t){if(!g.loop&&t){var n=q+($e.x*Ve-e)/$e.x,i=wn(e-xt.x);(n<0&&0<i||n>=Yt()-1&&i<0)&&(e=xt.x+i*g.mainScrollEndFriction)}xt.x=e,ut(e,G)}function v(e,t){var n=Ft[e]-Xe[e];return qe[e]+Ke[e]+n-t/Q*n}function C(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)}function w(e){e.x=wn(e.x),e.y=wn(e.y)}function x(e,t){var n=Jt(m.currItem,Ye,e);return t&&(Le=n),n}function F(e){return(e=e||m.currItem).initialZoomLevel}function A(e){return 0<(e=e||m.currItem).w?g.maxSpreadZoom:1}function _(e,t,n,i){return i===m.currItem.initialZoomLevel?(n[e]=m.currItem.initialPosition[e],!0):(n[e]=v(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):!!(n[e]<t.max[e])&&(n[e]=t.max[e],!0))}function l(e){var t="";g.escKey&&27===e.keyCode?t="close":g.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,m[t]())}function a(e){!e||(Te||Oe||ze||Ae)&&(e.preventDefault(),e.stopPropagation())}function D(){m.setScrollOffset(0,f.getScrollY())}function I(e){at[e]&&(at[e].raf&&fe(at[e].raf),ct--,delete at[e])}function O(e){at[e]&&I(e),at[e]||(ct++,at[e]={})}function T(){for(var e in at)at.hasOwnProperty(e)&&I(e)}function B(e,t,n,i,o,r,u){var l,s=p();O(e);var a=function(){if(at[e]){if(l=p()-s,i<=l)return I(e),r(n),void(u&&u());r((n-t)*o(l/i)+t),at[e].raf=he(a)}};a()}function P(e,t){return bt.x=d(e.x-t.x),bt.y=d(e.y-t.y),Math.sqrt(bt.x*bt.x+bt.y*bt.y)}function k(){Be&&(fe(Be),Be=null)}function S(e,t){return It.prevent=!Dt(e.target,g.isClickableElement),y("preventDragEvent",e,t,It),It.prevent}function R(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t}function L(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)}function U(){var e=Ge.y-m.currItem.initialPosition.y;return 1-d(e/(Ye.y/2))}function z(e){for(;0<Bt.length;)Bt.pop();return de?(We=0,gt.forEach(function(e){0===We?Bt[0]=e:1===We&&(Bt[1]=e),We++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(Bt[0]=R(e.touches[0],Ot),1<e.touches.length&&(Bt[1]=R(e.touches[1],Tt))):(Ot.x=e.pageX,Ot.y=e.pageY,Ot.id="",Bt[0]=Ot),Bt}function N(e,t){var n,i,o,r,u=Ge[e]+t[e],l=0<t[e],s=xt.x+t.x,a=xt.x-yt.x;return n=u>Le.min[e]||u<Le.max[e]?g.panEndFriction:1,u=Ge[e]+t[e]*n,!g.allowPanToNext&&J!==m.currItem.initialZoomLevel||(Ue?"h"!==Ne||"x"!==e||Oe||(l?(u>Le.min[e]&&(n=g.panEndFriction,Le.min[e],i=Le.min[e]-qe[e]),(i<=0||a<0)&&1<Yt()?(r=s,a<0&&s>yt.x&&(r=yt.x)):Le.min.x!==Le.max.x&&(o=u)):(u<Le.max[e]&&(n=g.panEndFriction,Le.max[e],i=qe[e]-Le.max[e]),(i<=0||0<a)&&1<Yt()?(r=s,0<a&&s<yt.x&&(r=yt.x)):Le.min.x!==Le.max.x&&(o=u))):r=s,"x"!==e)?void(!ze&&!Pe&&J>m.currItem.fitRatio&&(Ge[e]+=t[e]*n)):(void 0!==r&&(b(r,!0),Pe=r!==yt.x),Le.min.x!==Le.max.x&&(void 0===o?Pe||(Ge.x+=t.x*n):Ge.x=o),void 0!==r)}function M(e){if(!("mousedown"===e.type&&0<e.button)){if(qt)return void e.preventDefault();if(!_e||"mousedown"!==e.type){if(S(e,!0)&&e.preventDefault(),y("pointerDown"),de){var t=f.arraySearch(gt,e.pointerId,"id");t<0&&(t=gt.length),gt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=z(e),i=n.length;ke=null,T(),De&&1!==i||(De=Me=!0,f.bind(window,V,m),Fe=He=je=Ae=Pe=Te=Ie=Oe=!1,Ne=null,y("firstTouchStart",n),C(qe,Ge),Ke.x=Ke.y=0,C(ft,n[0]),C(mt,ft),yt.x=$e.x*Ve,Et=[{x:ft.x,y:ft.y}],we=Ce=p(),x(J,!0),k(),_t()),Se||!(1<i)||ze||Pe||(Q=J,Se=Ie=!(Oe=!1),Ke.y=Ke.x=0,C(qe,Ge),C(dt,n[0]),C(pt,n[1]),L(dt,pt,At),Ft.x=d(At.x)-Ge.x,Ft.y=d(At.y)-Ge.y,Re=P(dt,pt))}}}function j(e){if(e.preventDefault(),de){var t=f.arraySearch(gt,e.pointerId,"id");if(-1<t){var n=gt[t];n.x=e.pageX,n.y=e.pageY}}if(De){var i=z(e);if(Ne||Te||Se)ke=i;else if(xt.x!==$e.x*Ve)Ne="h";else{var o=d(i[0].x-ft.x)-d(i[0].y-ft.y);10<=d(o)&&(Ne=0<o?"h":"v",ke=i)}}}function Z(e){if(be.isOldAndroid){if(_e&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(_e),_e=setTimeout(function(){_e=0},600))}var t;if(y("pointerUp"),S(e,!1)&&e.preventDefault(),de){var n=f.arraySearch(gt,e.pointerId,"id");-1<n&&(t=gt.splice(n,1)[0],navigator.pointerEnabled?t.type=e.pointerType||"mouse":(t.type={2:"touch",3:"pen",4:"mouse"}[e.pointerType],t.type||(t.type=e.pointerType||"mouse")))}var i,o=z(e),r=o.length;if("mouseup"===e.type&&(r=0),2===r)return!(ke=null);1===r&&C(mt,o[0]),0!==r||Ne||ze||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),y("touchRelease",e,t));var u=-1;if(0===r&&(De=!1,f.unbind(window,V,m),k(),Se?u=0:-1!=wt&&(u=p()-wt)),wt=1===r?p():-1,i=-1!=u&&u<150?"zoom":"swipe",Se&&r<2&&(Se=!1,1===r&&(i="zoomPointerUp"),y("zoomGestureEnded")),ke=null,Te||Oe||ze||Ae){if(T(),(xe=xe||kt()).calculateSwipeSpeed("x"),Ae){if(U()<g.verticalDragRange)m.close();else{var l=Ge.y,s=Ze;B("verticalDrag",0,1,300,f.easing.cubic.out,function(e){Ge.y=(m.currItem.initialPosition.y-l)*e+l,E((1-s)*e+s),ot()}),y("onVerticalDrag",1)}return}if((Pe||ze)&&0===r){if(Rt(i,xe))return;i="zoomPointerUp"}return ze?void 0:"swipe"===i?void(!Pe&&J>m.currItem.fitRatio&&St(xe)):void Ut()}}var H,W,K,q,G,Y,V,X,$,J,Q,ee,te,ne,ie,oe,re,ue,le,se,ae,ce,de,pe,he,fe,me,ge,ye,Ee,be,ve,Ce,we,xe,Fe,Ae,_e,De,Ie,Oe,Te,Be,Pe,ke,Se,Re,Le,Ue,ze,Ne,Me,je,Ze,He,We,Ke={x:0,y:0},qe={x:0,y:0},Ge={x:0,y:0},Ye={},Ve=0,Xe={},$e={x:0,y:0},Je=0,Qe=!0,et=[],tt={},nt=!1,it={},ot=function(e){Ue&&(e&&(J>m.currItem.fitRatio?nt||(Qt(m.currItem,!1,!0),nt=!0):nt&&(Qt(m.currItem),nt=!1)),u(Ue,Ge.x,Ge.y,J))},rt=function(e){e.container&&u(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},ut=function(e,t){t[ce]=ee+e+"px, 0px"+te},lt=null,st=function(){lt&&(f.unbind(document,"mousemove",st),f.addClass(h,"pswp--has_mouse"),g.mouseUsed=!0,y("mouseUsed")),lt=setTimeout(function(){lt=null},100)},at={},ct=0,dt={},pt={},ht={},ft={},mt={},gt=[],yt={},Et=[],bt={},vt=0,Ct={x:0,y:0},wt=0,xt={x:0,y:0},Ft={x:0,y:0},At={x:0,y:0},_t=function(){De&&(Be=he(_t),Pt())},Dt=function(e,t){return e&&e!==document&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:Dt(e.parentNode,t))},It={},Ot={},Tt={},Bt=[],Pt=function(){if(ke){var e=ke.length;if(0!==e)if(C(dt,ke[0]),ht.x=dt.x-ft.x,ht.y=dt.y-ft.y,Se&&1<e){if(ft.x=dt.x,ft.y=dt.y,!ht.x&&!ht.y&&(s=ke[1],a=pt,s.x===a.x&&s.y===a.y))return;C(pt,ke[1]),Oe||(Oe=!0,y("zoomGestureStarted"));var t=P(dt,pt),n=Lt(t);n>m.currItem.initialZoomLevel+m.currItem.initialZoomLevel/15&&(He=!0);var i=1,o=F(),r=A();if(n<o)if(g.pinchToClose&&!He&&Q<=m.currItem.initialZoomLevel){var u=1-(o-n)/(o/1.2);E(u),y("onPinchClose",u),je=!0}else 1<(i=(o-n)/o)&&(i=1),n=o-i*(o/3);else r<n&&(1<(i=(n-r)/(6*o))&&(i=1),n=r+i*o);i<0&&(i=0),L(dt,pt,Ct),Ke.x+=Ct.x-At.x,Ke.y+=Ct.y-At.y,C(At,Ct),Ge.x=v("x",n),Ge.y=v("y",n),Fe=J<n,J=n,ot()}else{if(!Ne)return;if(Me&&(Me=!1,10<=d(ht.x)&&(ht.x-=ke[0].x-mt.x),10<=d(ht.y)&&(ht.y-=ke[0].y-mt.y)),ft.x=dt.x,ft.y=dt.y,0===ht.x&&0===ht.y)return;if("v"===Ne&&g.closeOnVerticalDrag&&"fit"===g.scaleMode&&J===m.currItem.initialZoomLevel){Ke.y+=ht.y,Ge.y+=ht.y;var l=U();return Ae=!0,y("onVerticalDrag",l),E(l),void ot()}(function(e,t,n){if(50<e-we){var i=2<Et.length?Et.shift():{};i.x=t,i.y=n,Et.push(i),we=e}})(p(),dt.x,dt.y),Te=!0,Le=m.currItem.bounds,N("x",ht)||(N("y",ht),w(Ge),ot())}}var s,a},kt=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=1<Et.length?(t=p()-we+50,Et[Et.length-2][e]):(t=p()-Ce,mt[e]),i.lastFlickOffset[e]=ft[e]-n,i.lastFlickDist[e]=d(i.lastFlickOffset[e]),i.lastFlickSpeed[e]=20<i.lastFlickDist[e]?i.lastFlickOffset[e]/t:0,d(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(Ge[t]>Le.min[t]?i.backAnimDestination[t]=Le.min[t]:Ge[t]<Le.max[t]&&(i.backAnimDestination[t]=Le.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,B("bounceZoomPan"+t,Ge[t],i.backAnimDestination[t],e||300,f.easing.sine.out,function(e){Ge[t]=e,ot()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=d(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,Ge[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(at.zoomPan&&(at.zoomPan.raf=he(i.panAnimLoop),i.now=p(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),ot(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05))return Ge.x=wn(Ge.x),Ge.y=wn(Ge.y),ot(),void I("zoomPan")}};return i},St=function(e){return e.calculateSwipeSpeed("y"),Le=m.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},d(e.lastFlickSpeed.x)<=.05&&d(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(O("zoomPan"),e.lastNow=p(),void e.panAnimLoop())},Rt=function(e,t){var n,i,o;if(ze||(vt=q),"swipe"===e){var r=ft.x-mt.x,u=t.lastFlickDist.x<10;30<r&&(u||20<t.lastFlickOffset.x)?i=-1:r<-30&&(u||t.lastFlickOffset.x<-20)&&(i=1)}i&&((q+=i)<0?(q=g.loop?Yt()-1:0,o=!0):q>=Yt()&&(q=g.loop?0:Yt()-1,o=!0),o&&!g.loop||(Je+=i,Ve-=i,n=!0));var l,s=$e.x*Ve,a=d(s-xt.x);return l=n||s>xt.x==0<t.lastFlickSpeed.x?(l=0<d(t.lastFlickSpeed.x)?a/d(t.lastFlickSpeed.x):333,l=c(l,400),xn(l,250)):333,vt===q&&(n=!1),ze=!0,y("mainScrollAnimStart"),B("mainScroll",xt.x,s,l,f.easing.cubic.out,b,function(){T(),ze=!1,vt=-1,!n&&vt===q||m.updateCurrItem(),y("mainScrollAnimComplete")}),n&&m.updateCurrItem(!0),n},Lt=function(e){return 1/Re*e*Q},Ut=function(){var e=J,t=F(),n=A();J<t?e=t:n<J&&(e=n);var i,o=Ze;return je&&!Fe&&!He&&J<t?m.close():(je&&(i=function(e){E((1-o)*e+o)}),m.zoomTo(e,0,200,f.easing.cubic.out,i)),!0};o("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,o){ue=e+t,le=e+n,se=e+i,ae=o?e+o:""}(de=be.pointerEvent)&&be.touch&&(be.touch=!1),de?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):be.touch?(e("touch","start","move","end","cancel"),pe=!0):e("mouse","down","move","up"),V=le+" "+se+" "+ae,X=ue,de&&!pe&&(pe=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),m.likelyTouchDevice=pe,$[ue]=M,$[le]=j,$[se]=Z,ae&&($[ae]=$[se]),be.touch&&(X+=" mousedown",V+=" mousemove mouseup",$.mousedown=$[ue],$.mousemove=$[le],$.mouseup=$[se]),pe||(g.allowPanToNext=!1)}}});function zt(u,e,l,t){var s;function a(){I("initialZoom"),l?(m.template.removeAttribute("style"),m.bg.removeAttribute("style")):(E(1),e&&(e.style.display="block"),f.addClass(h,"pswp--animated-in"),y("initialZoom"+(l?"OutEnd":"InEnd"))),t&&t(),qt=!1}Ht&&clearTimeout(Ht),Kt=qt=!0,u.initialLayout?(s=u.initialLayout,u.initialLayout=null):s=g.getThumbBoundsFn&&g.getThumbBoundsFn(q);var c,d,p=l?g.hideAnimationDuration:g.showAnimationDuration;if(!p||!s||void 0===s.x)return y("initialZoom"+(l?"Out":"In")),J=u.initialZoomLevel,C(Ge,u.initialPosition),ot(),h.style.opacity=l?0:1,E(1),void(p?setTimeout(function(){a()},p):a());c=K,d=!m.currItem.src||m.currItem.loadError||g.showHideOpacity,u.miniImg&&(u.miniImg.style.webkitBackfaceVisibility="hidden"),l||(J=s.w/u.w,Ge.x=s.x,Ge.y=s.y-ge,m[d?"template":"bg"].style.opacity=.001,ot()),O("initialZoom"),l&&!c&&f.removeClass(h,"pswp--animated-in"),d&&(l?f[(c?"remove":"add")+"Class"](h,"pswp--animate_opacity"):setTimeout(function(){f.addClass(h,"pswp--animate_opacity")},30)),Ht=setTimeout(function(){if(y("initialZoom"+(l?"Out":"In")),l){var t=s.w/u.w,n=Ge.x,i=Ge.y,o=J,r=Ze,e=function(e){1===e?(J=t,Ge.x=s.x,Ge.y=s.y-Ee):(J=(t-o)*e+o,Ge.x=(s.x-n)*e+n,Ge.y=(s.y-Ee-i)*e+i),ot(),d?h.style.opacity=1-e:E(r-e*r)};c?B("initialZoom",0,1,p,f.easing.cubic.out,e,a):(e(1),Ht=setTimeout(a,p+20))}else J=u.initialZoomLevel,C(Ge,u.initialPosition),ot(),E(1),d?h.style.opacity=1:E(1),Ht=setTimeout(a,p+20)},l?25:90)}function Nt(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,Qt(t,i,t===m.currItem&&nt),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))}function Mt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=f.createEl("pswp__img","img");return n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src,n}function jt(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=g.errorMsg.replace("%url%",e.src),!0}function Zt(){if(Xt.length){for(var e,t=0;t<Xt.length;t++)(e=Xt[t]).holder.index===e.index&&Nt(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);Xt=[]}}var Ht,Wt,Kt,qt,Gt,Yt,Vt={},Xt=[],$t={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Wt.length}},Jt=function(e,t,n){if(!e.src||e.loadError)return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds;var i,o,r,u,l=!n;if(l&&(e.vGap||(e.vGap={top:0,bottom:0}),y("parseVerticalMargin",e)),Vt.x=t.x,Vt.y=t.y-e.vGap.top-e.vGap.bottom,l){var s=Vt.x/e.w,a=Vt.y/e.h;e.fitRatio=s<a?s:a;var c=g.scaleMode;"orig"===c?n=1:"fit"===c&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}return n?(o=(i=e).w*n,r=e.h*n,(u=i.bounds).center.x=wn((Vt.x-o)/2),u.center.y=wn((Vt.y-r)/2)+i.vGap.top,u.max.x=o>Vt.x?wn(Vt.x-o):u.center.x,u.max.y=r>Vt.y?wn(Vt.y-r)+i.vGap.top:u.center.y,u.min.x=o>Vt.x?0:u.center.x,u.min.y=r>Vt.y?i.vGap.top:u.center.y,l&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0},Qt=function(e,t,n){if(e.src){t=t||e.container.lastChild;var i=n?e.w:wn(e.w*e.fitRatio),o=n?e.h:wn(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}};o("Controller",{publicMethods:{lazyLoadItem:function(e){e=s(e);var t=Gt(e);t&&(!t.loaded&&!t.loading||ie)&&(y("gettingData",e,t),t.src&&Mt(t))},initController:function(){f.extend(g,$t,!0),m.items=Wt=e,Gt=m.getItemAt,Yt=g.getNumItemsFn,g.loop,Yt()<3&&(g.loop=!1),r("beforeChange",function(e){var t,n=g.preload,i=!(null!==e)||0<=e,o=c(n[0],Yt()),r=c(n[1],Yt());for(t=1;t<=(i?r:o);t++)m.lazyLoadItem(q+t);for(t=1;t<=(i?o:r);t++)m.lazyLoadItem(q-t)}),r("initialLayout",function(){m.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(q)}),r("mainScrollAnimComplete",Zt),r("initialZoomInEnd",Zt),r("destroy",function(){for(var e,t=0;t<Wt.length;t++)(e=Wt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Xt=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==Wt[e]&&Wt[e]},allowProgressiveImg:function(){return g.forceProgressiveLoading||!pe||g.mouseUsed||1200<screen.width},setContent:function(t,n){g.loop&&(n=s(n));var e=m.getItemAt(t.index);e&&(e.container=null);var i,o=m.getItemAt(n);if(o){y("gettingData",n,o),t.index=n;var r=(t.item=o).container=f.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?r.appendChild(o.html):r.innerHTML=o.html),jt(o),Jt(o,Ye),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&((i=f.createEl("pswp__img","img")).style.opacity=1,i.src=o.src,Qt(o,i),Nt(0,o,r,i));else{if(o.loadComplete=function(e){if(H){if(t&&t.index===n){if(jt(e,!0))return e.loadComplete=e.img=null,Jt(e,Ye),rt(e),void(t.index===q&&m.updateCurrZoomItem());e.imageAppended?!qt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):be.transform&&(ze||qt)?Xt.push({item:e,baseDiv:r,img:e.img,index:n,holder:t,clearPlaceholder:!0}):Nt(0,e,r,e.img,0,!0)}e.loadComplete=null,e.img=null,y("imageLoadComplete",n,e)}},f.features.transform){var u="pswp__img pswp__img--placeholder";u+=o.msrc?"":" pswp__img--placeholder--blank";var l=f.createEl(u,o.msrc?"img":"");o.msrc&&(l.src=o.msrc),Qt(o,l),r.appendChild(l),o.placeholder=l}o.loading||Mt(o),m.allowProgressiveImg()&&(!Kt&&be.transform?Xt.push({item:o,baseDiv:r,img:o.img,index:n,holder:t}):Nt(0,o,r,o.img,0,!0))}Kt||n!==q?rt(o):(Ue=r.style,zt(o,i||o.img)),t.el.innerHTML="",t.el.appendChild(r)}else t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function en(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)}var tn,nn,on={};o("Tap",{publicMethods:{initTap:function(){r("firstTouchStart",m.onTapStart),r("touchRelease",m.onTapRelease),r("destroy",function(){on={},tn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(tn),tn=null)},onTapRelease:function(e,t){if(t&&!Te&&!Ie&&!ct){var n=t;if(tn&&(clearTimeout(tn),tn=null,o=on,d((i=n).x-o.x)<25&&d(i.y-o.y)<25))return void y("doubleTap",n);if("mouse"===t.type)return void en(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||f.hasClass(e.target,"pswp__single-tap"))return void en(e,t);C(on,n),tn=setTimeout(function(){en(e,t),tn=null},300)}var i,o}}}),o("DesktopZoom",{publicMethods:{initDesktopZoom:function(){ye||(pe?r("mouseUsed",function(){m.setupDesktopZoom()}):m.setupDesktopZoom(!0))},setupDesktopZoom:function(e){nn={};var t="wheel mousewheel DOMMouseScroll";r("bindEvents",function(){f.bind(h,t,m.handleMouseWheel)}),r("unbindEvents",function(){nn&&f.unbind(h,t,m.handleMouseWheel)}),m.mouseZoomedIn=!1;function n(){m.mouseZoomedIn&&(f.removeClass(h,"pswp--zoomed-in"),m.mouseZoomedIn=!1),J<1?f.addClass(h,"pswp--zoom-allowed"):f.removeClass(h,"pswp--zoom-allowed"),o()}var i,o=function(){i&&(f.removeClass(h,"pswp--dragging"),i=!1)};r("resize",n),r("afterChange",n),r("pointerDown",function(){m.mouseZoomedIn&&(i=!0,f.addClass(h,"pswp--dragging"))}),r("pointerUp",o),e||n()},handleMouseWheel:function(e){if(J<=m.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||ct||De?e.preventDefault():ce&&2<d(e.deltaY)&&(K=!0,m.close())),!0;if(e.stopPropagation(),nn.x=0,"deltaX"in e)1===e.deltaMode?(nn.x=18*e.deltaX,nn.y=18*e.deltaY):(nn.x=e.deltaX,nn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(nn.x=-.16*e.wheelDeltaX),nn.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;nn.y=e.detail}x(J,!0);var t=Ge.x-nn.x,n=Ge.y-nn.y;(g.modal||t<=Le.min.x&&t>=Le.max.x&&n<=Le.min.y&&n>=Le.max.y)&&e.preventDefault(),m.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:Ye.x/2+Xe.x,y:Ye.y/2+Xe.y};var t=g.getDoubleTapZoom(!0,m.currItem),n=J===t;m.mouseZoomedIn=!n,m.zoomTo(n?m.currItem.initialZoomLevel:t,e,333),f[(n?"remove":"add")+"Class"](h,"pswp--zoomed-in")}}});function rn(){return En.hash.substring(1)}function un(){sn&&clearTimeout(sn),cn&&clearTimeout(cn)}function ln(){var e=rn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(g.galleryPIDs){var r=t.pid;for(n=t.pid=0;n<Wt.length;n++)if(Wt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t}var sn,an,cn,dn,pn,hn,fn,mn,gn,yn,En,bn,vn={history:!0,galleryUID:1},Cn=function(){if(cn&&clearTimeout(cn),ct||De)cn=setTimeout(Cn,500);else{dn?clearTimeout(an):dn=!0;var e=q+1,t=Gt(q);t.hasOwnProperty("pid")&&(e=t.pid);var n=fn+"&gid="+g.galleryUID+"&pid="+e;mn||-1!==En.hash.indexOf(n)||(yn=!0);var i=En.href.split("#")[0]+"#"+n;bn?"#"+n!==window.location.hash&&history[mn?"replaceState":"pushState"]("",document.title,i):mn?En.replace(i):En.hash=n,mn=!0,an=setTimeout(function(){dn=!1},60)}};o("History",{publicMethods:{initHistory:function(){if(f.extend(g,vn,!0),g.history){En=window.location,mn=gn=yn=!1,fn=rn(),bn="pushState"in history,-1<fn.indexOf("gid=")&&(fn=(fn=fn.split("&gid=")[0]).split("?gid=")[0]),r("afterChange",m.updateURL),r("unbindEvents",function(){f.unbind(window,"hashchange",m.onHashChange)});var e=function(){hn=!0,gn||(yn?history.back():fn?En.hash=fn:bn?history.pushState("",document.title,En.pathname+En.search):En.hash=""),un()};r("unbindEvents",function(){K&&e()}),r("destroy",function(){hn||e()}),r("firstUpdate",function(){q=ln().pid});var t=fn.indexOf("pid=");-1<t&&"&"===(fn=fn.substring(0,t)).slice(-1)&&(fn=fn.slice(0,-1)),setTimeout(function(){H&&f.bind(window,"hashchange",m.onHashChange)},40)}},onHashChange:function(){return rn()===fn?(gn=!0,void m.close()):void(dn||(pn=!0,m.goTo(ln().pid),pn=!1))},updateURL:function(){un(),pn||(mn?sn=setTimeout(Cn,800):Cn())}}}),f.extend(m,{shout:y,listen:r,viewportSize:Ye,options:g,isMainScrollAnimating:function(){return ze},getZoomLevel:function(){return J},getCurrentIndex:function(){return q},isDragging:function(){return De},isZooming:function(){return Se},setScrollOffset:function(e,t){Xe.x=e,Ee=Xe.y=t,y("updateScrollOffset",Xe)},applyZoomPan:function(e,t,n,i){Ge.x=t,Ge.y=n,J=e,ot(i)},init:function(){if(!H&&!W){var e;m.framework=f,m.template=h,m.bg=f.getChildByClass(h,"pswp__bg"),me=h.className,H=!0,be=f.detectFeatures(),he=be.raf,fe=be.caf,ce=be.transform,ye=be.oldIE,m.scrollWrap=f.getChildByClass(h,"pswp__scroll-wrap"),m.container=f.getChildByClass(m.scrollWrap,"pswp__container"),G=m.container.style,m.itemHolders=oe=[{el:m.container.children[0],wrap:0,index:-1},{el:m.container.children[1],wrap:0,index:-1},{el:m.container.children[2],wrap:0,index:-1}],oe[0].el.style.display=oe[2].el.style.display="none",function(){if(ce){var e=be.perspective&&!pe;return ee="translate"+(e?"3d(":"("),te=be.perspective?", 0px)":")"}ce="left",f.addClass(h,"pswp--ie"),ut=function(e,t){t.left=e+"px"},rt=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},ot=function(){if(Ue){var e=Ue,t=m.currItem,n=1<t.fitRatio?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=Ge.x+"px",e.top=Ge.y+"px"}}}(),$={resize:m.updateSize,orientationchange:function(){clearTimeout(ve),ve=setTimeout(function(){Ye.x!==m.scrollWrap.clientWidth&&m.updateSize()},500)},scroll:D,keydown:l,click:a};var t=be.isOldIOSPhone||be.isOldAndroid||be.isMobileOpera;for(be.animationName&&be.transform&&!t||(g.showAnimationDuration=g.hideAnimationDuration=0),e=0;e<et.length;e++)m["init"+et[e]]();if(i)(m.ui=new i(m,f)).init();y("firstUpdate"),q=q||g.index||0,(isNaN(q)||q<0||q>=Yt())&&(q=0),m.currItem=Gt(q),(be.isOldIOSPhone||be.isOldAndroid)&&(Qe=!1),h.setAttribute("aria-hidden","false"),g.modal&&(Qe?h.style.position="fixed":(h.style.position="absolute",h.style.top=f.getScrollY()+"px")),void 0===Ee&&(y("initialLayout"),Ee=ge=f.getScrollY());var n="pswp--open ";for(g.mainClass&&(n+=g.mainClass+" "),g.showHideOpacity&&(n+="pswp--animate_opacity "),n+=pe?"pswp--touch":"pswp--notouch",n+=be.animationName?" pswp--css_animation":"",n+=be.svg?" pswp--svg":"",f.addClass(h,n),m.updateSize(),Y=-1,Je=null,e=0;e<3;e++)ut((e+Y)*$e.x,oe[e].el.style);ye||f.bind(m.scrollWrap,X,m),r("initialZoomInEnd",function(){m.setContent(oe[0],q-1),m.setContent(oe[2],q+1),oe[0].el.style.display=oe[2].el.style.display="block",g.focus&&h.focus(),f.bind(document,"keydown",m),be.transform&&f.bind(m.scrollWrap,"click",m),g.mouseUsed||f.bind(document,"mousemove",st),f.bind(window,"resize scroll orientationchange",m),y("bindEvents")}),m.setContent(oe[1],q),m.updateCurrItem(),y("afterInit"),Qe||(ne=setInterval(function(){ct||De||Se||J!==m.currItem.initialZoomLevel||m.updateSize()},1e3)),f.addClass(h,"pswp--visible")}},close:function(){H&&(W=!(H=!1),y("close"),f.unbind(window,"resize scroll orientationchange",m),f.unbind(window,"scroll",$.scroll),f.unbind(document,"keydown",m),f.unbind(document,"mousemove",st),be.transform&&f.unbind(m.scrollWrap,"click",m),De&&f.unbind(window,V,m),clearTimeout(ve),y("unbindEvents"),zt(m.currItem,null,!0,m.destroy))},destroy:function(){y("destroy"),Ht&&clearTimeout(Ht),h.setAttribute("aria-hidden","true"),h.className=me,ne&&clearInterval(ne),f.unbind(m.scrollWrap,X,m),f.unbind(window,"scroll",m),k(),T(),it=null},panTo:function(e,t,n){n||(e>Le.min.x?e=Le.min.x:e<Le.max.x&&(e=Le.max.x),t>Le.min.y?t=Le.min.y:t<Le.max.y&&(t=Le.max.y)),Ge.x=e,Ge.y=t,ot()},handleEvent:function(e){e=e||window.event,$[e.type]&&$[e.type](e)},goTo:function(e){var t=(e=s(e))-q;Je=t,q=e,m.currItem=Gt(q),Ve-=t,b($e.x*Ve),T(),ze=!1,m.updateCurrItem()},next:function(){m.goTo(q+1)},prev:function(){m.goTo(q-1)},updateCurrZoomItem:function(e){if(e&&y("beforeChange",0),oe[1].el.children.length){var t=oe[1].el.children[0];Ue=f.hasClass(t,"pswp__zoom-wrap")?t.style:null}else Ue=null;Le=m.currItem.bounds,Q=J=m.currItem.initialZoomLevel,Ge.x=Le.center.x,Ge.y=Le.center.y,e&&y("afterChange")},invalidateCurrItems:function(){ie=!0;for(var e=0;e<3;e++)oe[e].item&&(oe[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Je){var t,n=d(Je);if(!(e&&n<2)){m.currItem=Gt(q),nt=!1,y("beforeChange",Je),3<=n&&(Y+=Je+(0<Je?-3:3),n=3);for(var i=0;i<n;i++)0<Je?(t=oe.shift(),oe[2]=t,ut((++Y+2)*$e.x,t.el.style),m.setContent(t,q-n+i+1+1)):(t=oe.pop(),oe.unshift(t),ut(--Y*$e.x,t.el.style),m.setContent(t,q+n-i-1-1));if(Ue&&1===d(Je)){var o=Gt(re);o.initialZoomLevel!==J&&(Jt(o,Ye),Qt(o),rt(o))}Je=0,m.updateCurrZoomItem(),re=q,y("afterChange")}}},updateSize:function(e){if(!Qe&&g.modal){var t=f.getScrollY();if(Ee!==t&&(h.style.top=t+"px",Ee=t),!e&&tt.x===window.innerWidth&&tt.y===window.innerHeight)return;tt.x=window.innerWidth,tt.y=window.innerHeight,h.style.height=tt.y+"px"}if(Ye.x=m.scrollWrap.clientWidth,Ye.y=m.scrollWrap.clientHeight,D(),$e.x=Ye.x+wn(Ye.x*g.spacing),$e.y=Ye.y,b($e.x*Ve),y("beforeResize"),void 0!==Y){for(var n,i,o,r=0;r<3;r++)n=oe[r],ut((r+Y)*$e.x,n.el.style),o=q+r-1,g.loop&&2<Yt()&&(o=s(o)),(i=Gt(o))&&(ie||i.needsUpdate||!i.bounds)?(m.cleanSlide(i),m.setContent(n,o),1===r&&(m.currItem=i,m.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&m.setContent(n,o),i&&i.container&&(Jt(i,Ye),Qt(i),rt(i));ie=!1}Q=J=m.currItem.initialZoomLevel,(Le=m.currItem.bounds)&&(Ge.x=Le.center.x,Ge.y=Le.center.y,ot(!0)),y("resize")},zoomTo:function(t,e,n,i,o){e&&(Q=J,Ft.x=d(e.x)-Ge.x,Ft.y=d(e.y)-Ge.y,C(qe,Ge));var r=x(t,!1),u={};_("x",r,u,t),_("y",r,u,t);var l=J,s=Ge.x,a=Ge.y;w(u);function c(e){1===e?(J=t,Ge.x=u.x,Ge.y=u.y):(J=(t-l)*e+l,Ge.x=(u.x-s)*e+s,Ge.y=(u.y-a)*e+a),o&&o(e),ot(1===e)}n?B("customZoomTo",0,1,n,i||f.easing.sine.inOut,c):c(1)}})}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(o,l){function e(e){if(D)return!0;e=e||window.event,_.timeToIdle&&_.mouseUsed&&!v&&U();for(var t,n,i=(e.target||e.srcElement).getAttribute("class")||"",o=0;o<z.length;o++)(t=z[o]).onTap&&-1<i.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);if(n){e.stopPropagation&&e.stopPropagation(),D=!0;var r=l.features.isOldAndroid?600:30;setTimeout(function(){D=!1},r)}}function n(e,t,n){l[(n?"add":"remove")+"Class"](e,"pswp__"+t)}function i(){var e=1===_.getNumItemsFn();e!==A&&(n(h,"ui--one-slide",e),A=e)}function t(){n(E,"share-modal--hidden",k)}function r(){return(k=!k)?(l.removeClass(E,"pswp__share-modal--fade-in"),setTimeout(function(){k&&t()},300)):(t(),setTimeout(function(){k||l.addClass(E,"pswp__share-modal--fade-in")},30)),k||R(),!1}function u(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?wn(screen.width/2-275):100)),k||r(),1))}function s(e){for(var t=0;t<_.closeElClasses.length;t++)if(l.hasClass(e,"pswp__"+_.closeElClasses[t]))return!0}function a(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(O),O=setTimeout(function(){T.setIdle(!0)},_.timeToIdleOutside))}function c(e){x!==e&&(n(w,"preloader--active",!e),x=e)}function d(e){var t=e.vGap;if(!o.likelyTouchDevice||_.mouseUsed||screen.width>_.fitControlsWidth){var n=_.barsSize;if(_.captionEl&&"auto"===n.bottom)if(m||((m=l.createEl("pswp__caption pswp__caption--fake")).appendChild(l.createEl("pswp__caption__center")),h.insertBefore(m,f),l.addClass(h,"pswp__ui--fit")),_.addCaptionHTMLFn(e,m,!0)){var i=m.clientHeight;t.bottom=parseInt(i,10)||44}else t.bottom=n.top;else t.bottom="auto"===n.bottom?0:n.bottom;t.top=n.top}else t.top=t.bottom=0}var p,h,f,m,g,y,E,b,v,C,w,x,F,A,_,D,I,O,T=this,B=!1,P=!0,k=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},R=function(){for(var e,t,n,i,o="",r=0;r<_.shareButtons.length;r++)e=_.shareButtons[r],t=_.getImageURLForShare(e),n=_.getPageURLForShare(e),i=_.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",_.parseShareButtonOut&&(o=_.parseShareButtonOut(e,o));E.children[0].innerHTML=o,E.children[0].onclick=u},L=0,U=function(){clearTimeout(O),L=0,v&&T.setIdle(!1)},z=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){E=e},onTap:function(){r()}},{name:"button--share",option:"shareEl",onInit:function(e){y=e},onTap:function(){r()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){g=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){p.isFullscreen()?p.exit():p.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){w=e}}];T.init=function(){var t;l.extend(o.options,S,!0),_=o.options,h=l.getChildByClass(o.scrollWrap,"pswp__ui"),(C=o.listen)("onVerticalDrag",function(e){P&&e<.95?T.hideControls():!P&&.95<=e&&T.showControls()}),C("onPinchClose",function(e){P&&e<.9?(T.hideControls(),t=!0):t&&!P&&.9<e&&T.showControls()}),C("zoomGestureEnded",function(){(t=!1)&&!P&&T.showControls()}),C("beforeChange",T.update),C("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()===t?o.zoomTo(_.getDoubleTapZoom(!1,o.currItem),e,333):o.zoomTo(t,e,333)}),C("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),C("bindEvents",function(){l.bind(h,"pswpTap click",e),l.bind(o.scrollWrap,"pswpTap",T.onGlobalTap),o.likelyTouchDevice||l.bind(o.scrollWrap,"mouseover",T.onMouseOver)}),C("unbindEvents",function(){k||r(),I&&clearInterval(I),l.unbind(document,"mouseout",a),l.unbind(document,"mousemove",U),l.unbind(h,"pswpTap click",e),l.unbind(o.scrollWrap,"pswpTap",T.onGlobalTap),l.unbind(o.scrollWrap,"mouseover",T.onMouseOver),p&&(l.unbind(document,p.eventK,T.updateFullscreen),p.isFullscreen()&&(_.hideAnimationDuration=0,p.exit()),p=null)}),C("destroy",function(){_.captionEl&&(m&&h.removeChild(m),l.removeClass(f,"pswp__caption--empty")),E&&(E.children[0].onclick=null),l.removeClass(h,"pswp__ui--over-close"),l.addClass(h,"pswp__ui--hidden"),T.setIdle(!1)}),_.showAnimationDuration||l.removeClass(h,"pswp__ui--hidden"),C("initialZoomIn",function(){_.showAnimationDuration&&l.removeClass(h,"pswp__ui--hidden")}),C("initialZoomOut",function(){l.addClass(h,"pswp__ui--hidden")}),C("parseVerticalMargin",d),function(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){o=e[n],r=o.className;for(var i=0;i<z.length;i++)u=z[i],-1<r.indexOf("pswp__"+u.name)&&(_[u.option]?(l.removeClass(o,"pswp__element--disabled"),u.onInit&&u.onInit(o)):l.addClass(o,"pswp__element--disabled"))}}var o,r,u;e(h.children);var t=l.getChildByClass(h,"pswp__top-bar");t&&e(t.children)}(),_.shareEl&&y&&E&&(k=!0),i(),_.timeToIdle&&C("mouseUsed",function(){l.bind(document,"mousemove",U),l.bind(document,"mouseout",a),I=setInterval(function(){2==++L&&T.setIdle(!0)},_.timeToIdle/2)}),_.fullscreenEl&&!l.features.isOldAndroid&&((p=p||T.getFullscreenAPI())?(l.bind(document,p.eventK,T.updateFullscreen),T.updateFullscreen(),l.addClass(o.template,"pswp--supports-fs")):l.removeClass(o.template,"pswp--supports-fs")),_.preloaderEl&&(c(!0),C("beforeChange",function(){clearTimeout(F),F=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||c(!1):c(!0)},_.loadingIndicatorDelay)}),C("imageLoadComplete",function(e,t){o.currItem===t&&c(!0)}))},T.setIdle=function(e){n(h,"ui--idle",v=e)},T.update=function(){B=!(!P||!o.currItem||(T.updateIndexIndicator(),_.captionEl&&(_.addCaptionHTMLFn(o.currItem,f),n(f,"caption--empty",!o.currItem.title)),0)),k||r(),i()},T.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,l.getScrollY())},50),l[(p.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},T.updateIndexIndicator=function(){_.counterEl&&(g.innerHTML=o.getCurrentIndex()+1+_.indexIndicatorSep+_.getNumItemsFn())},T.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!D)if(e.detail&&"mouse"===e.detail.pointerType){if(s(t))return void o.close();l.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?_.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint))}else if(_.tapToToggleControls&&(P?T.hideControls():T.showControls()),_.tapToClose&&(l.hasClass(t,"pswp__img")||s(t)))return void o.close()},T.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;n(h,"ui--over-close",s(t))},T.hideControls=function(){l.addClass(h,"pswp__ui--hidden"),P=!1},T.showControls=function(){P=!0,B||T.update(),l.removeClass(h,"pswp__ui--hidden")},T.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},T.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return b=_.closeOnScroll,_.closeOnScroll=!1,"webkitRequestFullscreen"===this.enterK?void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):o.template[this.enterK]()},e.exit=function(){return _.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.addFilter=function(e){this.filters.push(e)},o.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},o.prototype.render=function(){var e=document.createElement("div");r.Utility.addClass(e,"natural-gallery-images sectionContainer"),e.appendChild(r.Utility.getIcon("icon-pict"));var t=document.createElement("div");r.Utility.addClass(t,"sectionName"),t.textContent=this.gallery.options.labelImages,e.appendChild(t);var n=document.createElement("span");e.appendChild(n),r.Utility.addClass(n,"natural-gallery-visible");var i=document.createElement("span");i.textContent=" / ",e.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"natural-gallery-total"),e.appendChild(o),this.element=document.createElement("div"),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),r.Utility.addClass(this.element,"natural-gallery-header"),this.element.appendChild(e),this.element},o.prototype.isFiltered=function(){return null!==this.collection},o.prototype.filter=function(){var t=null;this.filters.forEach(function(e){e.isActive()&&(t=null==t?e.collection:r.Utility.intersectionBy(t,e.collection,"id"))}),this.collection=t,this.gallery.refresh()},Object.defineProperty(o.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gallery",{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),o);function o(e){this._collection=null,this._filters=[],this.gallery=e}t.Header=i},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(0),l=n(1),s=(o(a,r=l.AbstractFilter),a.prototype.render=function(){var e=document.createElement("div");u.Utility.addClass(e,"natural-gallery-searchTerm sectionContainer"),e.appendChild(u.Utility.getIcon("icon-search")),e.appendChild(this.getInput());var t=document.createElement("label");u.Utility.addClass(t,"sectionName"),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);var n=document.createElement("span");return u.Utility.addClass(n,"bar"),e.appendChild(n),e},a.prototype.getInput=function(){var t=this,e=document.createElement("input");return e.setAttribute("required",""),e.addEventListener("keyup",function(e){27===e.keyCode&&(this.value=""),t.filter(this.value)}),e},a.prototype.filter=function(e){this.collection=null;var t=u.Utility.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){-1!==u.Utility.removeDiacritics(e.title+" "+(e.description?e.description:"")).toLowerCase().search(t)&&this.collection.push(e)},this)),this.header.filter()},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.SearchFilter=s},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(1),l=n(12),s=n(0),a=(o(c,r=u.AbstractFilter),Object.defineProperty(c.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),c.prototype.render=function(){if(this.prepare(),this.element)for(var e=this.element.getElementsByTagName("label"),t=e.length-1;0<t;t--)this.element.removeChild(e.item(t));else{this.element=document.createElement("div"),s.Utility.addClass(this.element,"natural-gallery-categories sectionContainer");var n=document.createElement("div");s.Utility.addClass(n,"sectionName"),n.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(n)}var i=this.element.getElementsByTagName("label")[0];return i&&i.parentNode.removeChild(i),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},c.prototype.prepare=function(){var t=[];this.header.gallery.categories.forEach(function(e){t.push(new l.Category(e.id,e.title,this))},this),this.none=new l.Category(-1,this.header.gallery.options.labelNone,this),this.others=new l.Category(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&t.length&&t.push(this.none),this.header.gallery.options.showOthers&&t.length&&t.push(this.others);var n=[];this.header.gallery.getOriginalCollection().forEach(function(e){(!e.categories||e.categories&&0===e.categories.length&&this.header.gallery.options.showNone)&&(e.categories=[this.none]),t.length&&s.Utility.differenceBy(e.categories,t,"id").length===e.categories.length&&this.header.gallery.options.showOthers&&(e.categories=[this.others]),e.categories.forEach(function(e){n.push(new l.Category(e.id,e.title,this))},this)},this),t=s.Utility.uniqBy(t,"id"),n=s.Utility.uniqBy(n,"id"),this.categories=t.length?s.Utility.intersectionBy(t,n,"id"):n},c.prototype.filter=function(){var n=this.categories.filter(function(e){return e.isActive});if(n.length===this.categories.length)this.collection=null;else if(0===n.length)this.collection=[];else{var i=[];this.header.gallery.getOriginalCollection().forEach(function(e){!e.categories||e.categories&&0===e.categories.length?this.none&&i.push(e):e.categories.some(function(t){if(n.some(function(e){return t.id===e.id}))return i.push(e),!0})},this),this.collection=i}this.header.filter()},Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"others",{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"none",{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),c);function c(e){var t=r.call(this,e)||this;return t.header=e,t._categories=[],t}t.CategoryFilter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.render=function(){var e=this;this.element=document.createElement("label");var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("checked","checked"),t.addEventListener("change",function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);var n=document.createElement("span");n.textContent=this.title;var i=document.createElement("span");r.Utility.addClass(i,"label"),i.appendChild(r.Utility.getIcon("icon-category")),i.appendChild(n),this.element.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"bar"),this.element.appendChild(o),this.element},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),o);function o(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}t.Category=i},function(e,t){"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),n=t.Organizer||(t.Organizer={}),a=Math.ceil,n.organize=function(e){"natural"===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):"square"===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):"square"===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},n.simulatePagination=function(e){var t=e.options.margin?e.options.margin:0,n=a(e.options.rowHeight*e.defaultImageRatio+t),i=(e.bodyWidth+t)/(n+t);return a(i)},n.organizeSquareByRowHeight=function(e,t,n,i){for(var o,r=a((t+(i=i||0))/(n+i)),u=wn((t+i-r*i)/r),l=t-r*u-(r-1)*i,s=0;s<e.length;s++)(o=e[s]).last=s%r==r-1,o.row=p(s/r),o.width=p(u),o.height=p(u),o.last&&(o.width=p(u+l))},n.organizeSquareByImagesPerRow=function(e,t,n,i){for(var o,r=(t-((n=n||4)-1)*(i=i||0))/n,u=0;u<e.length;u++)(o=e[u]).width=p(r),o.height=p(r),o.last=u%n==n-1,o.row=p(u/n)},n.organizeNatural=function(e,t,n,i,o){void 0===o&&(o=null),o=o||0,i=i||0,n=n||300;for(var r=1;r<=e.length;r++){var u=e.slice(0,r);if(t<=this.getRowWidth(n,i,u)){this.computeSizes(u,t,i,o),this.organizeNatural(e.slice(r),t,n,i,o+1);break}if(r===e.length){this.computeSizes(u,null,i,o,n);break}}},n.computeSizes=function(e,t,n,i,o){void 0===o&&(o=null);for(var r=t?this.getRowHeight(t,n,e):o,u=this.getRowWidth(r,n,e),l=t?this.apportionExcess(e,t,u):0,s=0,a=0;a<e.length;a++){var c=e[a],d=this.getImageRatio(c)*r-l;s+=d-p(d),d=p(d),(1<=s||a===e.length-1&&1===wn(s))&&(d++,s--),c.width=d,c.height=p(r),c.row=i,c.last=a===e.length-1}},n.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},n.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},n.getRatios=function(e){for(var t=0,n=0;n<e.length;n++)t+=this.getImageRatio(e[n]);return t},n.getImageRatio=function(e){return+e.tWidth/+e.tHeight},n.apportionExcess=function(e,t,n){return(n-t)/e.length}}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NaturalGallery",[],t):"object"==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()}(this,function(){var n,i,xn=Math.round,Fn=Math.max,p=Math.floor;return i={},o.m=n=[function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.getIcon=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?" ":"")+t)},e.hasClass=function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.uniqBy=function(e,n){var i=[];return e.forEach(function(t){i.some(function(e){return t[n]===e[n]})||i.push(t)}),i},e.differenceBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})||o.push(t)}),o},e.intersectionBy=function(e,n,i){var o=[];return e.forEach(function(t){n.some(function(e){return t[i]===e[i]})&&o.push(t)}),o};var n=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var t=0;t<n.length;t++)e=e.replace(n[t].letters,n[t].base);return e}}(t.Utility||(t.Utility={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(i.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),i);function i(e){this.header=e,this._collection=null}t.AbstractFilter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3),n(4);var i=n(5);t.Gallery=i.Gallery},function(){},function(){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(9),u=n(10),l=n(11),s=n(0),o=n(13),a=(c.prototype.render=function(){var n=this;this.noResults=document.createElement("div"),s.Utility.addClass(this.noResults,"natural-gallery-noresults"),this.noResults.appendChild(s.Utility.getIcon("icon-noresults")),this.noResults.style.display="block",this.nextButton=document.createElement("div"),s.Utility.addClass(this.nextButton,"natural-gallery-next"),this.nextButton.appendChild(s.Utility.getIcon("icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",function(e){e.preventDefault();var t=n.getRowsPerPage();n.addElements(t),n.pagination(t)});var e=document.createElement("iframe");this.rootElement.appendChild(e);var t=null;e.contentWindow.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){n.resize()},100)}),this.bodyElement=document.createElement("div"),s.Utility.addClass(this.bodyElement,"natural-gallery-body"),this.bodyElement.appendChild(this.noResults),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(this.nextButton)},c.prototype.addItems=function(e){if(e.constructor===Array&&e.length){var t=0===this.collection.length||this.collection.length===this.pswpContainer.length;e.forEach(function(e){this._collection.push(new i.Item(e,this))},this),o.Organizer.organize(this),this.header&&this.header.refresh(),t&&this.addElements(this.getRowsPerPage())}},c.prototype.style=function(){this.collection.forEach(function(e){e.style()})},c.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection;if(this.nextButton.style.display="block",this.pswpContainer.length===t.length)return this.nextButton.style.display="none",void(0===t.length&&(this.noResults.style.display="block",this.rootElement.getElementsByClassName("natural-gallery-images")[0].style.display="none"));for(var n,i=this.pswpContainer.length,o=this.pswpContainer.length?t[i].row+e:e,r=i;r<t.length;r++)(n=t[r]).row<o&&(this.pswpContainer.push(n.getPswpItem()),this.bodyElement.appendChild(n.loadElement()),n.bindClick(),n.flash()),this.pswpContainer.length===t.length&&(this.nextButton.style.display="none");this.noResults.style.display="none";var u=this.rootElement.getElementsByClassName("natural-gallery-images")[0];u&&(u.style.display="block");var l=this.rootElement.getElementsByClassName("natural-gallery-visible")[0];l&&(l.textContent=this.pswpContainer.length+"");var s=this.rootElement.getElementsByClassName("natural-gallery-total")[0];s&&(s.textContent=t.length+"")},c.prototype.getRowsPerPage=function(){if(this.options.limit)return this.options.limit;var e=(this.scrollElement?this.scrollElement.clientHeight:document.documentElement.clientHeight)-this.bodyElement.offsetTop,t=p(e/(.55*this.options.rowHeight));return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t},c.prototype.resize=function(){var e=p(this.bodyElement.getBoundingClientRect().width);if(e!==this.bodyWidth){this.bodyWidth=e,o.Organizer.organize(this);var t=this.collection[this.pswpContainer.length-1],n=t?t.row+1:this.getRowsPerPage();this.reset(),this.addElements(n)}},c.prototype.refresh=function(){this.reset(),o.Organizer.organize(this),this.addElements(this.getRowsPerPage())},c.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()}),this.noResults.style.display="block"},c.prototype.bindScroll=function(e){var o,r=this;o=e instanceof Document?e.documentElement:e,e.addEventListener("scroll",function(){var e=r.rootElement.offsetTop+r.rootElement.offsetHeight+r.options.infiniteScrollOffset,t=o.scrollTop-(o.clientTop||0),n=o.clientHeight,i=t-r.old_scroll_top;r.old_scroll_top=t,0<i&&e<=t+n&&(r.addElements(1),r.pagination(1))})},c.prototype.pagination=function(e){if(void 0===e&&(e=1),this.events.pagination)if(this.collection.length){var t=this.getMaxImagesPerRow();this._events.pagination(this.collection.length,t*e)}else{var n=o.Organizer.simulatePagination(this);this._events.pagination(this.collection.length,n*this.getRowsPerPage()*2)}},c.prototype.getMaxImagesPerRow=function(){return Fn.apply(null,this.collection.reduce(function(e,t){return e[t.row]=-1<e[t.row]?e[t.row]+1:1,e},[]))},c.prototype.select=function(e){-1===this._selected.indexOf(e)&&(this._selected.push(e),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselect=function(e){var t=this._selected.indexOf(e);-1<t&&(this._selected.splice(t,1),this._events.select(this._selected.map(function(e){return e.fields})))},c.prototype.unselectAll=function(){for(var e=this._selected.length-1;0<=e;e--)this._selected[e].toggleSelect();this._selected=[]},Object.defineProperty(c.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpContainer",{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"collection",{get:function(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection},set:function(e){this.reset(),this._collection=[],this.addItems(e)},enumerable:!0,configurable:!0}),c.prototype.getOriginalCollection=function(){return this._collection},Object.defineProperty(c.prototype,"bodyWidth",{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bodyElement",{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rootElement",{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpApi",{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pswpElement",{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"header",{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),c);function c(e,t,n,i){for(var o in void 0===i&&(i=null),this.scrollElement=i,this._options={rowHeight:350,format:"natural",round:3,margin:3,limit:0,showLabels:"hover",lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:"Category",labelNone:"None",labelOthers:"Others",labelSearch:"Search",labelImages:"Images",selectable:!1,zoomRotation:!0,infiniteScrollOffset:0},this._events={},this.old_scroll_top=0,this._pswpContainer=[],this._collection=[],this._categories=[],this._selected=[],this.defaultImageRatio=.7,this.pswpElement=t,this.options)void 0===n.options[o]&&(n.options[o]=this.options[o]);this.options=n.options,this.categories=n.categories?n.categories:[],this.rootElement=e,s.Utility.addClass(this.rootElement,"natural-gallery"),this._events=n.events?n.events:{},this._events.select&&(this.options.selectable=!0),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new r.Header(this),this.options.searchFilter&&this.header.addFilter(new u.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new l.CategoryFilter(this.header))),this.render(),this.bodyWidth=p(this.bodyElement.getBoundingClientRect().width),n.images?this.collection=n.images:this.pagination(),0===this.options.limit&&this.bindScroll(null===i?document:i)}t.Gallery=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=n(7),l=n(8),i=(o.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},o.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},o.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},o.prototype.getTitleDetails=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.getElementsByTagName("a"),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute("href"),i.linkTarget=n[0].getAttribute("target")),i},o.prototype.createElement=function(){var t=this,e=this.gallery.options,n=null;this.title&&-1<["true","hover"].indexOf(e.showLabels)&&(n=!0);var i=document.createElement("div"),o=document.createElement("div"),r=this.getLinkElement(),u=null;if(e.lightbox&&n&&r?(n=r,a.Utility.addClass(n,"button"),u=o):e.lightbox&&n&&!r?(n=document.createElement("div"),u=i):e.lightbox&&!n?u=i:!e.lightbox&&n&&r?(i=r,(n=document.createElement("div")).classList.add("button")):e.lightbox||!n||r?e.lightbox||n||!r||(i=r):n=document.createElement("div"),u&&(a.Utility.addClass(u,"zoomable"),e.zoomRotation&&a.Utility.addClass(u,"rotation")),a.Utility.addClass(o,"image"),a.Utility.addClass(i,"figure loading visible"),o.style.backgroundImage="url("+this.thumbnail+")",i.appendChild(o),e.round){var l=e.round+"px";i.style.borderRadius=l,o.style.borderRadius=l}if(this.element=i,this.image=o,n&&(n.textContent=this.title,a.Utility.addClass(n,"title"),"hover"===e.showLabels&&a.Utility.addClass(n,"hover"),i.appendChild(n)),this.gallery.options.selectable){this.selectBtn=document.createElement("div");var s=a.Utility.getIcon("icon-select");this.selectBtn.appendChild(s),this.selectBtn.classList.add("selectBtn"),s.addEventListener("click",function(e){e.stopPropagation(),t.toggleSelect()}),this.element.appendChild(this.selectBtn)}},o.prototype.toggleSelect=function(){this.selected=!this.selected,this.selected?(this.element.classList.add("selected"),this.gallery.select(this)):(this.element.classList.remove("selected"),this.gallery.unselect(this))},o.prototype.getLinkElement=function(){var t=this,e=null;return this.link&&(e=document.createElement("a"),this.gallery.events.link?e.addEventListener("click",function(e){t.gallery.events.link.preventDefault&&e.preventDefault(),t.gallery.events.link.callback(t._fields)}):(e.setAttribute("href",this.link),a.Utility.addClass(e,"link"),this.linkTarget&&e.setAttribute("target",this.linkTarget))),e},o.prototype.style=function(){a.Utility.removeClass(this.element,"visible"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.element.style.marginRight=this.gallery.options.margin+"px",this.element.style.marginBottom=this.gallery.options.margin+"px",this.last&&(this.element.style.marginRight="0");var e=this;window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.flash=function(){var e=this;a.Utility.removeClass(this.element,"visible"),window.setTimeout(function(){a.Utility.addClass(e.element,"visible")},0)},o.prototype.bindClick=function(){if(this.gallery.options.lightbox){var t=this;this.binded||(this.binded=!0,(this.link?this.image:this.element).addEventListener("click",function(e){t.openPhotoSwipe.call(t,e,t.element)}))}},o.prototype.openPhotoSwipe=function(e,t){e.preventDefault();var n=this;if(this.gallery.options.lightbox){var i=Array.prototype.slice.call(t.parentNode.children).indexOf(t)-1,o=new u(this.gallery.pswpElement,l,this.gallery.pswpContainer,{index:i,bgOpacity:.85,showHideOpacity:!0,loop:!1});(this.gallery.pswpApi=o).init();var r=null;o.listen("beforeChange",function(e){0<e&&o.getCurrentIndex()===o.items.length-1?n.gallery.addElements():e===-1*(o.items.length-1)&&(r=o.items.length,n.gallery.addElements())}),o.listen("afterChange",function(){r&&(o.goTo(r),r=null)})}},o.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},o.prototype.getElement=function(){return this.element},o.prototype.loadElement=function(){var e=this,t=document.createElement("img");return t.setAttribute("src",this.thumbnail),t.addEventListener("load",function(){a.Utility.removeClass(e.element,"loading"),a.Utility.addClass(e.element,"loaded")}),t.addEventListener("error",function(){a.Utility.addClass(e.element,"errored")}),this.element},o.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enlarged",{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tWidth",{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tHeight",{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eWidth",{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"eHeight",{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"last",{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"row",{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"binded",{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"linkTarget",{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),o);function o(e,t){this.gallery=t,this._binded=!1,this.selected=!1,this._fields=e,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}t.Item=i},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(p,o,e,t){var c=Math.min,d=Math.abs,n=Math.PI,m={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,n){m.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){m.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(m.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(n/2))},inOut:function(e){return-(Math.cos(n*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(m.features)return m.features;var e=m.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&0<r.length&&(1<=(r=parseInt(r[1],10))&&r<8&&(i.isOldIOSPhone=!0))}var u=o.match(/Android\s([0-9\.]*)/),l=u?u[1]:0;1<=(l=parseFloat(l))&&(l<4.4&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var s,a,c=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],p=0;p<4;p++){n=d[p];for(var h=0;h<3;h++)s=c[h],a=n+(n?s.charAt(0).toUpperCase()+s.slice(1):s),!i[s]&&a in t&&(i[s]=a);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var f=0;i.raf=function(e){var t=(new Date).getTime(),n=Fn(0,16-(t-f)),i=window.setTimeout(function(){e(t+n)},n);return f=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m.features=i}};m.detectFeatures(),m.features.oldIE&&(m.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",u=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=u;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var h=this,r=25,f={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};m.extend(f,t);var s,u,i,g,l,a,y,E,v,b,C,w,x,F,A,_,D,I,O,T,B,P,k,S,R,L,U,z,N,M,j,Z,H,W,K,q,G,Y,V,X,$,J,Q,ee,te,ne,ie,oe,re,ue,le,se,ae,ce,de,pe,he={x:0,y:0},fe={x:0,y:0},me={x:0,y:0},ge={},ye=0,Ee={},ve={x:0,y:0},be=0,Ce=!0,we=[],xe={},Fe=!1,Ae=function(e,t){m.extend(h,t.publicMethods),we.push(e)},_e=function(e){var t=Wt();return t-1<e?e-t:e<0?t+e:e},De={},Ie=function(e,t){return De[e]||(De[e]=[]),De[e].push(t)},Oe=function(e){var t=De[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(h,n)}},Te=function(){return(new Date).getTime()},Be=function(e){ce=e,h.bg.style.opacity=e*f.bgOpacity},Pe=function(e,t,n,i,o){(!Fe||o&&o!==h.currItem)&&(i/=o?o.fitRatio:h.currItem.fitRatio),e[P]=w+t+"px, "+n+"px"+x+" scale("+i+")"},ke=function(e){re&&(e&&(b>h.currItem.fitRatio?Fe||(Qt(h.currItem,!1,!0),Fe=!0):Fe&&(Qt(h.currItem),Fe=!1)),Pe(re,me.x,me.y,b))},Se=function(e){e.container&&Pe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Re=function(e,t){t[P]=w+e+"px, 0px"+x},Le=function(e,t){if(!f.loop&&t){var n=g+(ve.x*ye-e)/ve.x,i=xn(e-ht.x);(n<0&&0<i||n>=Wt()-1&&i<0)&&(e=ht.x+i*f.mainScrollEndFriction)}ht.x=e,Re(e,l)},Ue=function(e,t){var n=ft[e]-Ee[e];return fe[e]+he[e]+n-t/C*n},ze=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ne=function(e){e.x=xn(e.x),e.y=xn(e.y)},Me=null,je=function(){Me&&(m.unbind(document,"mousemove",je),m.addClass(p,"pswp--has_mouse"),f.mouseUsed=!0,Oe("mouseUsed")),Me=setTimeout(function(){Me=null},100)},Ze=function(e,t){var n=Vt(h.currItem,ge,e);return t&&(oe=n),n},He=function(e){return(e=e||h.currItem).initialZoomLevel},We=function(e){return 0<(e=e||h.currItem).w?f.maxSpreadZoom:1},Ke=function(e,t,n,i){return i===h.currItem.initialZoomLevel?(n[e]=h.currItem.initialPosition[e],!0):(n[e]=Ue(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):!!(n[e]<t.max[e])&&(n[e]=t.max[e],!0))},qe=function(e){var t="";f.escKey&&27===e.keyCode?t="close":f.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,h[t]())},Ge=function(e){!e||(J||$||ue||G)&&(e.preventDefault(),e.stopPropagation())},Ye=function(){h.setScrollOffset(0,m.getScrollY())},Ve={},Xe=0,$e=function(e){Ve[e]&&(Ve[e].raf&&L(Ve[e].raf),Xe--,delete Ve[e])},Je=function(e){Ve[e]&&$e(e),Ve[e]||(Xe++,Ve[e]={})},Qe=function(){for(var e in Ve)Ve.hasOwnProperty(e)&&$e(e)},et=function(e,t,n,i,o,r,u){var l,s=Te();Je(e);var a=function(){if(Ve[e]){if(l=Te()-s,i<=l)return $e(e),r(n),void(u&&u());r((n-t)*o(l/i)+t),Ve[e].raf=R(a)}};a()},tt={},nt={},it={},ot={},rt={},ut=[],lt={},st=[],at={},ct=0,dt={x:0,y:0},pt=0,ht={x:0,y:0},ft={x:0,y:0},mt={x:0,y:0},gt=function(e,t){return at.x=d(e.x-t.x),at.y=d(e.y-t.y),Math.sqrt(at.x*at.x+at.y*at.y)},yt=function(){Q&&(L(Q),Q=null)},Et=function(){V&&(Q=R(Et),Pt())},vt=function(e,t){return e&&e!==document&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:vt(e.parentNode,t))},bt={},Ct=function(e,t){return bt.prevent=!vt(e.target,f.isClickableElement),Oe("preventDragEvent",e,t,bt),bt.prevent},wt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},xt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Ft=function(){var e=me.y-h.currItem.initialPosition.y;return 1-d(e/(ge.y/2))},At={},_t={},Dt=[],It=function(e){for(;0<Dt.length;)Dt.pop();return k?(pe=0,ut.forEach(function(e){0===pe?Dt[0]=e:1===pe&&(Dt[1]=e),pe++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(Dt[0]=wt(e.touches[0],At),1<e.touches.length&&(Dt[1]=wt(e.touches[1],_t))):(At.x=e.pageX,At.y=e.pageY,At.id="",Dt[0]=At),Dt},Ot=function(e,t){var n,i,o,r,u=me[e]+t[e],l=0<t[e],s=ht.x+t.x,a=ht.x-lt.x;return n=u>oe.min[e]||u<oe.max[e]?f.panEndFriction:1,u=me[e]+t[e]*n,!f.allowPanToNext&&b!==h.currItem.initialZoomLevel||(re?"h"!==le||"x"!==e||$||(l?(u>oe.min[e]&&(n=f.panEndFriction,oe.min[e]-u,i=oe.min[e]-fe[e]),(i<=0||a<0)&&1<Wt()?(r=s,a<0&&s>lt.x&&(r=lt.x)):oe.min.x!==oe.max.x&&(o=u)):(u<oe.max[e]&&(n=f.panEndFriction,u-oe.max[e],i=fe[e]-oe.max[e]),(i<=0||0<a)&&1<Wt()?(r=s,0<a&&s<lt.x&&(r=lt.x)):oe.min.x!==oe.max.x&&(o=u))):r=s,"x"!==e)?void(!ue&&!ee&&b>h.currItem.fitRatio&&(me[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),ee=r!==lt.x),oe.min.x!==oe.max.x&&(void 0===o?ee||(me.x+=t.x*n):me.x=o),void 0!==r)},Tt=function(e){if(!("mousedown"===e.type&&0<e.button)){if(Zt)return void e.preventDefault();if(!Y||"mousedown"!==e.type){if(Ct(e,!0)&&e.preventDefault(),Oe("pointerDown"),k){var t=m.arraySearch(ut,e.pointerId,"id");t<0&&(t=ut.length),ut[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=It(e),i=n.length;te=null,Qe(),V&&1!==i||(V=se=!0,m.bind(window,y,h),q=de=ae=G=ee=J=X=$=!1,le=null,Oe("firstTouchStart",n),ze(fe,me),he.x=he.y=0,ze(ot,n[0]),ze(rt,ot),lt.x=ve.x*ye,st=[{x:ot.x,y:ot.y}],W=H=Te(),Ze(b,!0),yt(),Et()),ne||!(1<i)||ue||ee||(C=b,ne=X=!($=!1),he.y=he.x=0,ze(fe,me),ze(tt,n[0]),ze(nt,n[1]),xt(tt,nt,mt),ft.x=d(mt.x)-me.x,ft.y=d(mt.y)-me.y,ie=gt(tt,nt))}}},Bt=function(e){if(e.preventDefault(),k){var t=m.arraySearch(ut,e.pointerId,"id");if(-1<t){var n=ut[t];n.x=e.pageX,n.y=e.pageY}}if(V){var i=It(e);if(le||J||ne)te=i;else if(ht.x!==ve.x*ye)le="h";else{var o=d(i[0].x-ot.x)-d(i[0].y-ot.y);10<=d(o)&&(le=0<o?"h":"v",te=i)}}},Pt=function(){if(te){var e=te.length;if(0!==e)if(ze(tt,te[0]),it.x=tt.x-ot.x,it.y=tt.y-ot.y,ne&&1<e){if(ot.x=tt.x,ot.y=tt.y,!it.x&&!it.y&&function(e,t){return e.x===t.x&&e.y===t.y}(te[1],nt))return;ze(nt,te[1]),$||($=!0,Oe("zoomGestureStarted"));var t=gt(tt,nt),n=Ut(t);n>h.currItem.initialZoomLevel+h.currItem.initialZoomLevel/15&&(de=!0);var i=1,o=He(),r=We();if(n<o)if(f.pinchToClose&&!de&&C<=h.currItem.initialZoomLevel){var u=o-n,l=1-u/(o/1.2);Be(l),Oe("onPinchClose",l),ae=!0}else 1<(i=(o-n)/o)&&(i=1),n=o-i*(o/3);else r<n&&(1<(i=(n-r)/(6*o))&&(i=1),n=r+i*o);i<0&&(i=0),t,xt(tt,nt,dt),he.x+=dt.x-mt.x,he.y+=dt.y-mt.y,ze(mt,dt),me.x=Ue("x",n),me.y=Ue("y",n),q=b<n,b=n,ke()}else{if(!le)return;if(se&&(se=!1,10<=d(it.x)&&(it.x-=te[0].x-rt.x),10<=d(it.y)&&(it.y-=te[0].y-rt.y)),ot.x=tt.x,ot.y=tt.y,0===it.x&&0===it.y)return;if("v"===le&&f.closeOnVerticalDrag&&"fit"===f.scaleMode&&b===h.currItem.initialZoomLevel){he.y+=it.y,me.y+=it.y;var s=Ft();return G=!0,Oe("onVerticalDrag",s),Be(s),void ke()}(function(e,t,n){if(50<e-W){var i=2<st.length?st.shift():{};i.x=t,i.y=n,st.push(i),W=e}})(Te(),tt.x,tt.y),J=!0,oe=h.currItem.bounds;var a=Ot("x",it);a||(Ot("y",it),Ne(me),ke())}}},kt=function(e){if(j.isOldAndroid){if(Y&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(Y),Y=setTimeout(function(){Y=0},600))}var t;if(Oe("pointerUp"),Ct(e,!1)&&e.preventDefault(),k){var n=m.arraySearch(ut,e.pointerId,"id");-1<n&&(t=ut.splice(n,1)[0],navigator.pointerEnabled?t.type=e.pointerType||"mouse":(t.type={2:"touch",3:"pen",4:"mouse"}[e.pointerType],t.type||(t.type=e.pointerType||"mouse")))}var i,o=It(e),r=o.length;if("mouseup"===e.type&&(r=0),2===r)return!(te=null);1===r&&ze(rt,o[0]),0!==r||le||ue||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Oe("touchRelease",e,t));var u=-1;if(0===r&&(V=!1,m.unbind(window,y,h),yt(),ne?u=0:-1!=pt&&(u=Te()-pt)),pt=1===r?Te():-1,i=-1!=u&&u<150?"zoom":"swipe",ne&&r<2&&(ne=!1,1===r&&(i="zoomPointerUp"),Oe("zoomGestureEnded")),te=null,J||$||ue||G){if(Qe(),(K=K||St()).calculateSwipeSpeed("x"),G){var l=Ft();if(l<f.verticalDragRange)h.close();else{var s=me.y,a=ce;et("verticalDrag",0,1,300,m.easing.cubic.out,function(e){me.y=(h.currItem.initialPosition.y-s)*e+s,Be((1-a)*e+a),ke()}),Oe("onVerticalDrag",1)}return}if((ee||ue)&&0===r){var c=Lt(i,K);if(c)return;i="zoomPointerUp"}return ue?void 0:"swipe"===i?void(!ee&&b>h.currItem.fitRatio&&Rt(K)):void zt()}},St=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=1<st.length?(t=Te()-W+50,st[st.length-2][e]):(t=Te()-H,rt[e]),i.lastFlickOffset[e]=ot[e]-n,i.lastFlickDist[e]=d(i.lastFlickOffset[e]),i.lastFlickSpeed[e]=20<i.lastFlickDist[e]?i.lastFlickOffset[e]/t:0,d(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(me[t]>oe.min[t]?i.backAnimDestination[t]=oe.min[t]:me[t]<oe.max[t]&&(i.backAnimDestination[t]=oe.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,et("bounceZoomPan"+t,me[t],i.backAnimDestination[t],e||300,m.easing.sine.out,function(e){me[t]=e,ke()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=d(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,me[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(Ve.zoomPan&&(Ve.zoomPan.raf=R(i.panAnimLoop),i.now=Te(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),ke(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05))return me.x=xn(me.x),me.y=xn(me.y),ke(),void $e("zoomPan")}};return i},Rt=function(e){return e.calculateSwipeSpeed("y"),oe=h.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},d(e.lastFlickSpeed.x)<=.05&&d(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(Je("zoomPan"),e.lastNow=Te(),void e.panAnimLoop())},Lt=function(e,t){var n,i,o;if(ue||(ct=g),"swipe"===e){var r=ot.x-rt.x,u=t.lastFlickDist.x<10;30<r&&(u||20<t.lastFlickOffset.x)?i=-1:r<-30&&(u||t.lastFlickOffset.x<-20)&&(i=1)}i&&((g+=i)<0?(g=f.loop?Wt()-1:0,o=!0):g>=Wt()&&(g=f.loop?0:Wt()-1,o=!0),o&&!f.loop||(be+=i,ye-=i,n=!0));var l,s=ve.x*ye,a=d(s-ht.x);return l=n||s>ht.x==0<t.lastFlickSpeed.x?(l=0<d(t.lastFlickSpeed.x)?a/d(t.lastFlickSpeed.x):333,l=c(l,400),Fn(l,250)):333,ct===g&&(n=!1),ue=!0,Oe("mainScrollAnimStart"),et("mainScroll",ht.x,s,l,m.easing.cubic.out,Le,function(){Qe(),ue=!1,ct=-1,!n&&ct===g||h.updateCurrItem(),Oe("mainScrollAnimComplete")}),n&&h.updateCurrItem(!0),n},Ut=function(e){return 1/ie*e*C},zt=function(){var e=b,t=He(),n=We();b<t?e=t:n<b&&(e=n);var i,o=ce;return ae&&!q&&!de&&b<t?h.close():(ae&&(i=function(e){Be((1-o)*e+o)}),h.zoomTo(e,0,200,m.easing.cubic.out,i)),!0};Ae("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){I=e+t,O=e+n,T=e+i,B=o?e+o:""};(k=j.pointerEvent)&&j.touch&&(j.touch=!1),k?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):j.touch?(e("touch","start","move","end","cancel"),S=!0):e("mouse","down","move","up"),y=O+" "+T+" "+B,E=I,k&&!S&&(S=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),h.likelyTouchDevice=S,v[I]=Tt,v[O]=Bt,v[T]=kt,B&&(v[B]=v[T]),j.touch&&(E+=" mousedown",y+=" mousemove mouseup",v.mousedown=v[I],v.mousemove=v[O],v.mouseup=v[T]),S||(f.allowPanToNext=!1)}}});var Nt,Mt,jt,Zt,Ht,Wt,Kt=function(l,e,s,t){var a;Nt&&clearTimeout(Nt),jt=Zt=!0,l.initialLayout?(a=l.initialLayout,l.initialLayout=null):a=f.getThumbBoundsFn&&f.getThumbBoundsFn(g);var c=s?f.hideAnimationDuration:f.showAnimationDuration,d=function(){$e("initialZoom"),s?(h.template.removeAttribute("style"),h.bg.removeAttribute("style")):(Be(1),e&&(e.style.display="block"),m.addClass(p,"pswp--animated-in"),Oe("initialZoom"+(s?"OutEnd":"InEnd"))),t&&t(),Zt=!1};if(!c||!a||void 0===a.x)return Oe("initialZoom"+(s?"Out":"In")),b=l.initialZoomLevel,ze(me,l.initialPosition),ke(),p.style.opacity=s?0:1,Be(1),void(c?setTimeout(function(){d()},c):d());!function(){var r=i,u=!h.currItem.src||h.currItem.loadError||f.showHideOpacity;l.miniImg&&(l.miniImg.style.webkitBackfaceVisibility="hidden"),s||(b=a.w/l.w,me.x=a.x,me.y=a.y-z,h[u?"template":"bg"].style.opacity=.001,ke()),Je("initialZoom"),s&&!r&&m.removeClass(p,"pswp--animated-in"),u&&(s?m[(r?"remove":"add")+"Class"](p,"pswp--animate_opacity"):setTimeout(function(){m.addClass(p,"pswp--animate_opacity")},30)),Nt=setTimeout(function(){if(Oe("initialZoom"+(s?"Out":"In")),s){var t=a.w/l.w,n={x:me.x,y:me.y},i=b,o=ce,e=function(e){1===e?(b=t,me.x=a.x,me.y=a.y-M):(b=(t-i)*e+i,me.x=(a.x-n.x)*e+n.x,me.y=(a.y-M-n.y)*e+n.y),ke(),u?p.style.opacity=1-e:Be(o-e*o)};r?et("initialZoom",0,1,c,m.easing.cubic.out,e,d):(e(1),Nt=setTimeout(d,c+20))}else b=l.initialZoomLevel,ze(me,l.initialPosition),ke(),Be(1),u?p.style.opacity=1:Be(1),Nt=setTimeout(d,c+20)},s?25:90)}()},qt={},Gt=[],Yt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Mt.length}},Vt=function(e,t,n){if(!e.src||e.loadError)return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds;var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Oe("parseVerticalMargin",e)),qt.x=t.x,qt.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=qt.x/e.w,r=qt.y/e.h;e.fitRatio=o<r?o:r;var u=f.scaleMode;"orig"===u?n=1:"fit"===u&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}return n?(function(e,t,n){var i=e.bounds;i.center.x=xn((qt.x-t)/2),i.center.y=xn((qt.y-n)/2)+e.vGap.top,i.max.x=t>qt.x?xn(qt.x-t):i.center.x,i.max.y=n>qt.y?xn(qt.y-n)+e.vGap.top:i.center.y,i.min.x=t>qt.x?0:i.center.x,i.min.y=n>qt.y?e.vGap.top:i.center.y}(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0},Xt=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,Qt(t,i,t===h.currItem&&Fe),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},$t=function(e){e.loading=!0,e.loaded=!1;var t=e.img=m.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},Jt=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=f.errorMsg.replace("%url%",e.src),!0},Qt=function(e,t,n){if(e.src){t=t||e.container.lastChild;var i=n?e.w:xn(e.w*e.fitRatio),o=n?e.h:xn(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},en=function(){if(Gt.length){for(var e,t=0;t<Gt.length;t++)(e=Gt[t]).holder.index===e.index&&Xt(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);Gt=[]}};Ae("Controller",{publicMethods:{lazyLoadItem:function(e){e=_e(e);var t=Ht(e);t&&(!t.loaded&&!t.loading||A)&&(Oe("gettingData",e,t),t.src&&$t(t))},initController:function(){m.extend(f,Yt,!0),h.items=Mt=e,Ht=h.getItemAt,Wt=f.getNumItemsFn,f.loop,Wt()<3&&(f.loop=!1),Ie("beforeChange",function(e){var t,n=f.preload,i=!(null!==e)||0<=e,o=c(n[0],Wt()),r=c(n[1],Wt());for(t=1;t<=(i?r:o);t++)h.lazyLoadItem(g+t);for(t=1;t<=(i?o:r);t++)h.lazyLoadItem(g-t)}),Ie("initialLayout",function(){h.currItem.initialLayout=f.getThumbBoundsFn&&f.getThumbBoundsFn(g)}),Ie("mainScrollAnimComplete",en),Ie("initialZoomInEnd",en),Ie("destroy",function(){for(var e,t=0;t<Mt.length;t++)(e=Mt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Gt=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==Mt[e]&&Mt[e]},allowProgressiveImg:function(){return f.forceProgressiveLoading||!S||f.mouseUsed||1200<screen.width},setContent:function(t,n){f.loop&&(n=_e(n));var e=h.getItemAt(t.index);e&&(e.container=null);var i,o=h.getItemAt(n);if(o){Oe("gettingData",n,o),t.index=n;var r=(t.item=o).container=m.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?r.appendChild(o.html):r.innerHTML=o.html),Jt(o),Vt(o,ge),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&((i=m.createEl("pswp__img","img")).style.opacity=1,i.src=o.src,Qt(o,i),Xt(n,o,r,i,!0));else{if(o.loadComplete=function(e){if(s){if(t&&t.index===n){if(Jt(e,!0))return e.loadComplete=e.img=null,Vt(e,ge),Se(e),void(t.index===g&&h.updateCurrZoomItem());e.imageAppended?!Zt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):j.transform&&(ue||Zt)?Gt.push({item:e,baseDiv:r,img:e.img,index:n,holder:t,clearPlaceholder:!0}):Xt(n,e,r,e.img,ue||Zt,!0)}e.loadComplete=null,e.img=null,Oe("imageLoadComplete",n,e)}},m.features.transform){var u="pswp__img pswp__img--placeholder";u+=o.msrc?"":" pswp__img--placeholder--blank";var l=m.createEl(u,o.msrc?"img":"");o.msrc&&(l.src=o.msrc),Qt(o,l),r.appendChild(l),o.placeholder=l}o.loading||$t(o),h.allowProgressiveImg()&&(!jt&&j.transform?Gt.push({item:o,baseDiv:r,img:o.img,index:n,holder:t}):Xt(n,o,r,o.img,!0,!0))}jt||n!==g?Se(o):(re=r.style,Kt(o,i||o.img)),t.el.innerHTML="",t.el.appendChild(r)}else t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var tn,nn,on={},rn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Ae("Tap",{publicMethods:{initTap:function(){Ie("firstTouchStart",h.onTapStart),Ie("touchRelease",h.onTapRelease),Ie("destroy",function(){on={},tn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(tn),tn=null)},onTapRelease:function(e,t){if(t&&!J&&!X&&!Xe){var n=t;if(tn&&(clearTimeout(tn),tn=null,function(e,t){return d(e.x-t.x)<r&&d(e.y-t.y)<r}(n,on)))return void Oe("doubleTap",n);if("mouse"===t.type)return void rn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||m.hasClass(e.target,"pswp__single-tap"))return void rn(e,t);ze(on,n),tn=setTimeout(function(){rn(e,t),tn=null},300)}}}}),Ae("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(S?Ie("mouseUsed",function(){h.setupDesktopZoom()}):h.setupDesktopZoom(!0))},setupDesktopZoom:function(e){nn={};var t="wheel mousewheel DOMMouseScroll";Ie("bindEvents",function(){m.bind(p,t,h.handleMouseWheel)}),Ie("unbindEvents",function(){nn&&m.unbind(p,t,h.handleMouseWheel)}),h.mouseZoomedIn=!1;var n,i=function(){h.mouseZoomedIn&&(m.removeClass(p,"pswp--zoomed-in"),h.mouseZoomedIn=!1),b<1?m.addClass(p,"pswp--zoom-allowed"):m.removeClass(p,"pswp--zoom-allowed"),o()},o=function(){n&&(m.removeClass(p,"pswp--dragging"),n=!1)};Ie("resize",i),Ie("afterChange",i),Ie("pointerDown",function(){h.mouseZoomedIn&&(n=!0,m.addClass(p,"pswp--dragging"))}),Ie("pointerUp",o),e||i()},handleMouseWheel:function(e){if(b<=h.currItem.fitRatio)return f.modal&&(!f.closeOnScroll||Xe||V?e.preventDefault():P&&2<d(e.deltaY)&&(i=!0,h.close())),!0;if(e.stopPropagation(),nn.x=0,"deltaX"in e)1===e.deltaMode?(nn.x=18*e.deltaX,nn.y=18*e.deltaY):(nn.x=e.deltaX,nn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(nn.x=-.16*e.wheelDeltaX),nn.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;nn.y=e.detail}Ze(b,!0);var t=me.x-nn.x,n=me.y-nn.y;(f.modal||t<=oe.min.x&&t>=oe.max.x&&n<=oe.min.y&&n>=oe.max.y)&&e.preventDefault(),h.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:ge.x/2+Ee.x,y:ge.y/2+Ee.y};var t=f.getDoubleTapZoom(!0,h.currItem),n=b===t;h.mouseZoomedIn=!n,h.zoomTo(n?h.currItem.initialZoomLevel:t,e,333),m[(n?"remove":"add")+"Class"](p,"pswp--zoomed-in")}}});var un,ln,sn,an,cn,dn,pn,hn,fn,mn,gn,yn,En={history:!0,galleryUID:1},vn=function(){return gn.hash.substring(1)},bn=function(){un&&clearTimeout(un),sn&&clearTimeout(sn)},Cn=function(){var e=vn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(f.galleryPIDs){var r=t.pid;for(t.pid=0,n=0;n<Mt.length;n++)if(Mt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},wn=function(){if(sn&&clearTimeout(sn),Xe||V)sn=setTimeout(wn,500);else{an?clearTimeout(ln):an=!0;var e=g+1,t=Ht(g);t.hasOwnProperty("pid")&&(e=t.pid);var n=pn+"&gid="+f.galleryUID+"&pid="+e;hn||-1!==gn.hash.indexOf(n)||(mn=!0);var i=gn.href.split("#")[0]+"#"+n;yn?"#"+n!==window.location.hash&&history[hn?"replaceState":"pushState"]("",document.title,i):hn?gn.replace(i):gn.hash=n,hn=!0,ln=setTimeout(function(){an=!1},60)}};Ae("History",{publicMethods:{initHistory:function(){if(m.extend(f,En,!0),f.history){gn=window.location,hn=fn=mn=!1,pn=vn(),yn="pushState"in history,-1<pn.indexOf("gid=")&&(pn=(pn=pn.split("&gid=")[0]).split("?gid=")[0]),Ie("afterChange",h.updateURL),Ie("unbindEvents",function(){m.unbind(window,"hashchange",h.onHashChange)});var e=function(){dn=!0,fn||(mn?history.back():pn?gn.hash=pn:yn?history.pushState("",document.title,gn.pathname+gn.search):gn.hash=""),bn()};Ie("unbindEvents",function(){i&&e()}),Ie("destroy",function(){dn||e()}),Ie("firstUpdate",function(){g=Cn().pid});var t=pn.indexOf("pid=");-1<t&&("&"===(pn=pn.substring(0,t)).slice(-1)&&(pn=pn.slice(0,-1))),setTimeout(function(){s&&m.bind(window,"hashchange",h.onHashChange)},40)}},onHashChange:function(){return vn()===pn?(fn=!0,void h.close()):void(an||(cn=!0,h.goTo(Cn().pid),cn=!1))},updateURL:function(){bn(),cn||(hn?un=setTimeout(wn,800):wn())}}}),m.extend(h,{shout:Oe,listen:Ie,viewportSize:ge,options:f,isMainScrollAnimating:function(){return ue},getZoomLevel:function(){return b},getCurrentIndex:function(){return g},isDragging:function(){return V},isZooming:function(){return ne},setScrollOffset:function(e,t){Ee.x=e,M=Ee.y=t,Oe("updateScrollOffset",Ee)},applyZoomPan:function(e,t,n,i){me.x=t,me.y=n,b=e,ke(i)},init:function(){if(!s&&!u){var e;h.framework=m,h.template=p,h.bg=m.getChildByClass(p,"pswp__bg"),U=p.className,s=!0,j=m.detectFeatures(),R=j.raf,L=j.caf,P=j.transform,N=j.oldIE,h.scrollWrap=m.getChildByClass(p,"pswp__scroll-wrap"),h.container=m.getChildByClass(h.scrollWrap,"pswp__container"),l=h.container.style,h.itemHolders=_=[{el:h.container.children[0],wrap:0,index:-1},{el:h.container.children[1],wrap:0,index:-1},{el:h.container.children[2],wrap:0,index:-1}],_[0].el.style.display=_[2].el.style.display="none",function(){if(P){var e=j.perspective&&!S;return w="translate"+(e?"3d(":"("),x=j.perspective?", 0px)":")"}P="left",m.addClass(p,"pswp--ie"),Re=function(e,t){t.left=e+"px"},Se=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},ke=function(){if(re){var e=re,t=h.currItem,n=1<t.fitRatio?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=me.x+"px",e.top=me.y+"px"}}}(),v={resize:h.updateSize,orientationchange:function(){clearTimeout(Z),Z=setTimeout(function(){ge.x!==h.scrollWrap.clientWidth&&h.updateSize()},500)},scroll:Ye,keydown:qe,click:Ge};var t=j.isOldIOSPhone||j.isOldAndroid||j.isMobileOpera;for(j.animationName&&j.transform&&!t||(f.showAnimationDuration=f.hideAnimationDuration=0),e=0;e<we.length;e++)h["init"+we[e]]();if(o){var n=h.ui=new o(h,m);n.init()}Oe("firstUpdate"),g=g||f.index||0,(isNaN(g)||g<0||g>=Wt())&&(g=0),h.currItem=Ht(g),(j.isOldIOSPhone||j.isOldAndroid)&&(Ce=!1),p.setAttribute("aria-hidden","false"),f.modal&&(Ce?p.style.position="fixed":(p.style.position="absolute",p.style.top=m.getScrollY()+"px")),void 0===M&&(Oe("initialLayout"),M=z=m.getScrollY());var i="pswp--open ";for(f.mainClass&&(i+=f.mainClass+" "),f.showHideOpacity&&(i+="pswp--animate_opacity "),i+=S?"pswp--touch":"pswp--notouch",i+=j.animationName?" pswp--css_animation":"",i+=j.svg?" pswp--svg":"",m.addClass(p,i),h.updateSize(),a=-1,be=null,e=0;e<3;e++)Re((e+a)*ve.x,_[e].el.style);N||m.bind(h.scrollWrap,E,h),Ie("initialZoomInEnd",function(){h.setContent(_[0],g-1),h.setContent(_[2],g+1),_[0].el.style.display=_[2].el.style.display="block",f.focus&&p.focus(),m.bind(document,"keydown",h),j.transform&&m.bind(h.scrollWrap,"click",h),f.mouseUsed||m.bind(document,"mousemove",je),m.bind(window,"resize scroll orientationchange",h),Oe("bindEvents")}),h.setContent(_[1],g),h.updateCurrItem(),Oe("afterInit"),Ce||(F=setInterval(function(){Xe||V||ne||b!==h.currItem.initialZoomLevel||h.updateSize()},1e3)),m.addClass(p,"pswp--visible")}},close:function(){s&&(u=!(s=!1),Oe("close"),m.unbind(window,"resize scroll orientationchange",h),m.unbind(window,"scroll",v.scroll),m.unbind(document,"keydown",h),m.unbind(document,"mousemove",je),j.transform&&m.unbind(h.scrollWrap,"click",h),V&&m.unbind(window,y,h),clearTimeout(Z),Oe("unbindEvents"),Kt(h.currItem,null,!0,h.destroy))},destroy:function(){Oe("destroy"),Nt&&clearTimeout(Nt),p.setAttribute("aria-hidden","true"),p.className=U,F&&clearInterval(F),m.unbind(h.scrollWrap,E,h),m.unbind(window,"scroll",h),yt(),Qe(),De=null},panTo:function(e,t,n){n||(e>oe.min.x?e=oe.min.x:e<oe.max.x&&(e=oe.max.x),t>oe.min.y?t=oe.min.y:t<oe.max.y&&(t=oe.max.y)),me.x=e,me.y=t,ke()},handleEvent:function(e){e=e||window.event,v[e.type]&&v[e.type](e)},goTo:function(e){var t=(e=_e(e))-g;be=t,g=e,h.currItem=Ht(g),ye-=t,Le(ve.x*ye),Qe(),ue=!1,h.updateCurrItem()},next:function(){h.goTo(g+1)},prev:function(){h.goTo(g-1)},updateCurrZoomItem:function(e){if(e&&Oe("beforeChange",0),_[1].el.children.length){var t=_[1].el.children[0];re=m.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;oe=h.currItem.bounds,C=b=h.currItem.initialZoomLevel,me.x=oe.center.x,me.y=oe.center.y,e&&Oe("afterChange")},invalidateCurrItems:function(){A=!0;for(var e=0;e<3;e++)_[e].item&&(_[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=d(be);if(!(e&&n<2)){h.currItem=Ht(g),Fe=!1,Oe("beforeChange",be),3<=n&&(a+=be+(0<be?-3:3),n=3);for(var i=0;i<n;i++)0<be?(t=_.shift(),_[2]=t,Re((++a+2)*ve.x,t.el.style),h.setContent(t,g-n+i+1+1)):(t=_.pop(),_.unshift(t),Re(--a*ve.x,t.el.style),h.setContent(t,g+n-i-1-1));if(re&&1===d(be)){var o=Ht(D);o.initialZoomLevel!==b&&(Vt(o,ge),Qt(o),Se(o))}be=0,h.updateCurrZoomItem(),D=g,Oe("afterChange")}}},updateSize:function(e){if(!Ce&&f.modal){var t=m.getScrollY();if(M!==t&&(p.style.top=t+"px",M=t),!e&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,p.style.height=xe.y+"px"}if(ge.x=h.scrollWrap.clientWidth,ge.y=h.scrollWrap.clientHeight,Ye(),ve.x=ge.x+xn(ge.x*f.spacing),ve.y=ge.y,Le(ve.x*ye),Oe("beforeResize"),void 0!==a){for(var n,i,o,r=0;r<3;r++)n=_[r],Re((r+a)*ve.x,n.el.style),o=g+r-1,f.loop&&2<Wt()&&(o=_e(o)),(i=Ht(o))&&(A||i.needsUpdate||!i.bounds)?(h.cleanSlide(i),h.setContent(n,o),1===r&&(h.currItem=i,h.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&h.setContent(n,o),i&&i.container&&(Vt(i,ge),Qt(i),Se(i));A=!1}C=b=h.currItem.initialZoomLevel,(oe=h.currItem.bounds)&&(me.x=oe.center.x,me.y=oe.center.y,ke(!0)),Oe("resize")},zoomTo:function(t,e,n,i,o){e&&(C=b,ft.x=d(e.x)-me.x,ft.y=d(e.y)-me.y,ze(fe,me));var r=Ze(t,!1),u={};Ke("x",r,u,t),Ke("y",r,u,t);var l=b,s={x:me.x,y:me.y};Ne(u);var a=function(e){1===e?(b=t,me.x=u.x,me.y=u.y):(b=(t-l)*e+l,me.x=(u.x-s.x)*e+s.x,me.y=(u.y-s.y)*e+s.y),o&&o(e),ke(1===e)};n?et("customZoomTo",0,1,n,i||m.easing.sine.inOut,a):a(1)}})}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";return function(o,l){var t,s,r,u,n,i,a,c,d,e,p,h,f,m,g,y,E,v,b=this,C=!1,w=!0,x=!0,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(e){if(y)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!d&&S();for(var t,n,i=e.target||e.srcElement,o=i.getAttribute("class")||"",r=0;r<z.length;r++)(t=z[r]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);if(n){e.stopPropagation&&e.stopPropagation(),y=!0;var u=l.features.isOldAndroid?600:30;setTimeout(function(){y=!1},u)}},_=function(e,t,n){l[(n?"add":"remove")+"Class"](e,"pswp__"+t)},D=function(){var e=1===g.getNumItemsFn();e!==m&&(_(s,"ui--one-slide",e),m=e)},I=function(){_(a,"share-modal--hidden",x)},O=function(){return(x=!x)?(l.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){x&&I()},300)):(I(),setTimeout(function(){x||l.addClass(a,"pswp__share-modal--fade-in")},30)),x||B(),!1},T=function(e){var t=(e=e||window.event).target||e.srcElement;return!(o.shout("shareLinkClick",e,t),!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?xn(screen.width/2-275):100)),x||O(),1))},B=function(){for(var e,t,n,i,o,r="",u=0;u<g.shareButtons.length;u++)e=g.shareButtons[u],n=g.getImageURLForShare(e),i=g.getPageURLForShare(e),o=g.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(r=g.parseShareButtonOut(e,r));a.children[0].innerHTML=r,a.children[0].onclick=T},P=function(e){for(var t=0;t<g.closeElClasses.length;t++)if(l.hasClass(e,"pswp__"+g.closeElClasses[t]))return!0},k=0,S=function(){clearTimeout(v),k=0,d&&b.setIdle(!1)},R=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(v),v=setTimeout(function(){b.setIdle(!0)},g.timeToIdleOutside))},L=function(e){h!==e&&(_(p,"preloader--active",!e),h=e)},U=function(e){var t=e.vGap;if(!o.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth){var n=g.barsSize;if(g.captionEl&&"auto"===n.bottom)if(u||((u=l.createEl("pswp__caption pswp__caption--fake")).appendChild(l.createEl("pswp__caption__center")),s.insertBefore(u,r),l.addClass(s,"pswp__ui--fit")),g.addCaptionHTMLFn(e,u,!0)){var i=u.clientHeight;t.bottom=parseInt(i,10)||44}else t.bottom=n.top;else t.bottom="auto"===n.bottom?0:n.bottom;t.top=n.top}else t.top=t.bottom=0},z=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(e){i=e},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){n=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){t.isFullscreen()?t.exit():t.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}];b.init=function(){l.extend(o.options,F,!0),g=o.options,s=l.getChildByClass(o.scrollWrap,"pswp__ui"),e=o.listen,function(){var t;e("onVerticalDrag",function(e){w&&.95>e?b.hideControls():!w&&.95<=e&&b.showControls()}),e("onPinchClose",function(e){w&&.9>e?(b.hideControls(),t=!0):t&&!w&&.9<e&&b.showControls()}),e("zoomGestureEnded",function(){t=!1,t&&!w&&b.showControls()})}(),e("beforeChange",b.update),e("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()===t?o.zoomTo(g.getDoubleTapZoom(!1,o.currItem),e,333):o.zoomTo(t,e,333)}),e("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),e("bindEvents",function(){l.bind(s,"pswpTap click",A),l.bind(o.scrollWrap,"pswpTap",b.onGlobalTap),o.likelyTouchDevice||l.bind(o.scrollWrap,"mouseover",b.onMouseOver)}),e("unbindEvents",function(){x||O(),E&&clearInterval(E),l.unbind(document,"mouseout",R),l.unbind(document,"mousemove",S),l.unbind(s,"pswpTap click",A),l.unbind(o.scrollWrap,"pswpTap",b.onGlobalTap),l.unbind(o.scrollWrap,"mouseover",b.onMouseOver),t&&(l.unbind(document,t.eventK,b.updateFullscreen),t.isFullscreen()&&(g.hideAnimationDuration=0,t.exit()),t=null)}),e("destroy",function(){g.captionEl&&(u&&s.removeChild(u),l.removeClass(r,"pswp__caption--empty")),a&&(a.children[0].onclick=null),l.removeClass(s,"pswp__ui--over-close"),l.addClass(s,"pswp__ui--hidden"),b.setIdle(!1)}),g.showAnimationDuration||l.removeClass(s,"pswp__ui--hidden"),e("initialZoomIn",function(){g.showAnimationDuration&&l.removeClass(s,"pswp__ui--hidden")}),e("initialZoomOut",function(){l.addClass(s,"pswp__ui--hidden")}),e("parseVerticalMargin",U),function(){var o,r,u,e=function(e){if(e)for(var t=e.length,n=0;n<t;n++){o=e[n],r=o.className;for(var i=0;i<z.length;i++)u=z[i],-1<r.indexOf("pswp__"+u.name)&&(g[u.option]?(l.removeClass(o,"pswp__element--disabled"),u.onInit&&u.onInit(o)):l.addClass(o,"pswp__element--disabled"))}};e(s.children);var t=l.getChildByClass(s,"pswp__top-bar");t&&e(t.children)}(),g.shareEl&&i&&a&&(x=!0),D(),g.timeToIdle&&e("mouseUsed",function(){l.bind(document,"mousemove",S),l.bind(document,"mouseout",R),E=setInterval(function(){2==++k&&b.setIdle(!0)},g.timeToIdle/2)}),g.fullscreenEl&&!l.features.isOldAndroid&&((t=t||b.getFullscreenAPI())?(l.bind(document,t.eventK,b.updateFullscreen),b.updateFullscreen(),l.addClass(o.template,"pswp--supports-fs")):l.removeClass(o.template,"pswp--supports-fs")),g.preloaderEl&&(L(!0),e("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||L(!1):L(!0)},g.loadingIndicatorDelay)}),e("imageLoadComplete",function(e,t){o.currItem===t&&L(!0)}))},b.setIdle=function(e){_(s,"ui--idle",d=e)},b.update=function(){C=!(!w||!o.currItem)&&(b.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(o.currItem,r),_(r,"caption--empty",!o.currItem.title)),!0),x||O(),D()},b.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,l.getScrollY())},50),l[(t.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},b.updateIndexIndicator=function(){g.counterEl&&(n.innerHTML=o.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},b.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!y)if(e.detail&&"mouse"===e.detail.pointerType){if(P(t))return void o.close();l.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?g.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint))}else if(g.tapToToggleControls&&(w?b.hideControls():b.showControls()),g.tapToClose&&(l.hasClass(t,"pswp__img")||P(t)))return void o.close()},b.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;_(s,"ui--over-close",P(t))},b.hideControls=function(){l.addClass(s,"pswp__ui--hidden"),w=!1},b.showControls=function(){w=!0,C||b.update(),l.removeClass(s,"pswp__ui--hidden")},b.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},b.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"===this.enterK?void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):o.template[this.enterK]()},e.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}})?i.call(t,n,t,e):i)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.addFilter=function(e){this.filters.push(e)},o.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},o.prototype.render=function(){var e=document.createElement("div");r.Utility.addClass(e,"natural-gallery-images sectionContainer"),e.appendChild(r.Utility.getIcon("icon-pict"));var t=document.createElement("div");r.Utility.addClass(t,"sectionName"),t.textContent=this.gallery.options.labelImages,e.appendChild(t);var n=document.createElement("span");e.appendChild(n),r.Utility.addClass(n,"natural-gallery-visible");var i=document.createElement("span");i.textContent=" / ",e.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"natural-gallery-total"),e.appendChild(o),this.element=document.createElement("div"),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),r.Utility.addClass(this.element,"natural-gallery-header"),this.element.appendChild(e),this.element},o.prototype.isFiltered=function(){return null!==this.collection},o.prototype.filter=function(){var t=null;this.filters.forEach(function(e){e.isActive()&&(t=null==t?e.collection:r.Utility.intersectionBy(t,e.collection,"id"))}),this.collection=t,this.gallery.refresh()},Object.defineProperty(o.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gallery",{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),o);function o(e){this._collection=null,this._filters=[],this.gallery=e}t.Header=i},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(0),l=n(1),s=(r=l.AbstractFilter,o(a,r),a.prototype.render=function(){var e=document.createElement("div");u.Utility.addClass(e,"natural-gallery-searchTerm sectionContainer"),e.appendChild(u.Utility.getIcon("icon-search")),e.appendChild(this.getInput());var t=document.createElement("label");u.Utility.addClass(t,"sectionName"),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);var n=document.createElement("span");return u.Utility.addClass(n,"bar"),e.appendChild(n),e},a.prototype.getInput=function(){var t=this,e=document.createElement("input");return e.setAttribute("required",""),e.addEventListener("keyup",function(e){27===e.keyCode&&(this.value=""),t.filter(this.value)}),e},a.prototype.filter=function(e){this.collection=null;var t=u.Utility.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){-1!==u.Utility.removeDiacritics(e.title+" "+(e.description?e.description:"")).toLowerCase().search(t)&&this.collection.push(e)},this)),this.header.filter()},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.SearchFilter=s},function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r,u=n(1),l=n(12),s=n(0),a=(r=u.AbstractFilter,o(c,r),Object.defineProperty(c.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),c.prototype.render=function(){if(this.prepare(),this.element)for(var e=this.element.getElementsByTagName("label"),t=e.length-1;0<t;t--)this.element.removeChild(e.item(t));else{this.element=document.createElement("div"),s.Utility.addClass(this.element,"natural-gallery-categories sectionContainer");var n=document.createElement("div");s.Utility.addClass(n,"sectionName"),n.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(n)}var i=this.element.getElementsByTagName("label")[0];return i&&i.parentNode.removeChild(i),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},c.prototype.prepare=function(){var t=[];this.header.gallery.categories.forEach(function(e){t.push(new l.Category(e.id,e.title,this))},this),this.none=new l.Category(-1,this.header.gallery.options.labelNone,this),this.others=new l.Category(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&t.length&&t.push(this.none),this.header.gallery.options.showOthers&&t.length&&t.push(this.others);var n=[];this.header.gallery.getOriginalCollection().forEach(function(e){(!e.categories||e.categories&&0===e.categories.length&&this.header.gallery.options.showNone)&&(e.categories=[this.none]),t.length&&s.Utility.differenceBy(e.categories,t,"id").length===e.categories.length&&this.header.gallery.options.showOthers&&(e.categories=[this.others]),e.categories.forEach(function(e){n.push(new l.Category(e.id,e.title,this))},this)},this),t=s.Utility.uniqBy(t,"id"),n=s.Utility.uniqBy(n,"id"),this.categories=t.length?s.Utility.intersectionBy(t,n,"id"):n},c.prototype.filter=function(){var n=this.categories.filter(function(e){return e.isActive});if(n.length===this.categories.length)this.collection=null;else if(0===n.length)this.collection=[];else{var i=[];this.header.gallery.getOriginalCollection().forEach(function(e){!e.categories||e.categories&&0===e.categories.length?this.none&&i.push(e):e.categories.some(function(t){if(n.some(function(e){return t.id===e.id}))return i.push(e),!0})},this),this.collection=i}this.header.filter()},Object.defineProperty(c.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"others",{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"none",{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),c);function c(e){var t=r.call(this,e)||this;return t.header=e,t._categories=[],t}t.CategoryFilter=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(o.prototype.render=function(){var e=this;this.element=document.createElement("label");var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("checked","checked"),t.addEventListener("change",function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);var n=document.createElement("span");n.textContent=this.title;var i=document.createElement("span");r.Utility.addClass(i,"label"),i.appendChild(r.Utility.getIcon("icon-category")),i.appendChild(n),this.element.appendChild(i);var o=document.createElement("span");return r.Utility.addClass(o,"bar"),this.element.appendChild(o),this.element},Object.defineProperty(o.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),o);function o(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}t.Category=i},function(e,t){"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),n=t.Organizer||(t.Organizer={}),a=Math.ceil,n.organize=function(e){"natural"===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):"square"===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):"square"===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},n.simulatePagination=function(e){var t=e.options.margin?e.options.margin:0,n=a(e.options.rowHeight*e.defaultImageRatio+t),i=(e.bodyWidth+t)/(n+t);return a(i)},n.organizeSquareByRowHeight=function(e,t,n,i){for(var o,r=a((t+(i=i||0))/(n+i)),u=xn((t+i-r*i)/r),l=t-r*u-(r-1)*i,s=0;s<e.length;s++)(o=e[s]).last=s%r==r-1,o.row=p(s/r),o.width=p(u),o.height=p(u),o.last&&(o.width=p(u+l))},n.organizeSquareByImagesPerRow=function(e,t,n,i){for(var o,r=(t-((n=n||4)-1)*(i=i||0))/n,u=0;u<e.length;u++)(o=e[u]).width=p(r),o.height=p(r),o.last=u%n==n-1,o.row=p(u/n)},n.organizeNatural=function(e,t,n,i,o){void 0===o&&(o=null),o=o||0,i=i||0,n=n||300;for(var r=1;r<=e.length;r++){var u=e.slice(0,r);if(t<=this.getRowWidth(n,i,u)){this.computeSizes(u,t,i,o),this.organizeNatural(e.slice(r),t,n,i,o+1);break}if(r===e.length){this.computeSizes(u,null,i,o,n);break}}},n.computeSizes=function(e,t,n,i,o){void 0===o&&(o=null);for(var r=t?this.getRowHeight(t,n,e):o,u=this.getRowWidth(r,n,e),l=t?this.apportionExcess(e,t,u):0,s=0,a=0;a<e.length;a++){var c=e[a],d=this.getImageRatio(c)*r-l;s+=d-p(d),d=p(d),(1<=s||a===e.length-1&&1===xn(s))&&(d++,s--),c.width=d,c.height=p(r),c.row=i,c.last=a===e.length-1}},n.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},n.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},n.getRatios=function(e){for(var t=0,n=0;n<e.length;n++)t+=this.getImageRatio(e[n]);return t},n.getImageRatio=function(e){return+e.tWidth/+e.tHeight},n.apportionExcess=function(e,t,n){return(n-t)/e.length}}],o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2);function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}});